<!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nova: Writer's Conspiracy - Project Details</title>
        <meta name="description" content="Nova: Writer's Conspiracy - A cosmic atelier where storytellers conspire with AI to birth entire universes, balancing structure and soul in creative agency. A science fiction novella with philosophical undertones. Literary science fiction approach with focus on character development.">
        <meta property="og:title" content="Nova: Writer's Conspiracy">
        <meta property="og:description" content="Collaboration between human and AI in creative agency">
        <meta property="og:type" content="website">
        <meta property="og:url" content="">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="Nova: Writer's Conspiracy">
        <meta name="twitter:description" content="Collaboration between human and AI in creative agency">
        <link rel="stylesheet" href="styles/main.css">
        <link rel="stylesheet" href="styles/themes.css">
        <link rel="stylesheet" href="styles/components.css">
        <link rel="stylesheet" href="styles/markdown-styles.css">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            /* Accessibility: prefers-reduced-motion support */
            @media (prefers-reduced-motion: reduce) {
                .hero-bg, .hero-particles, .gallery-item, .timeline-item, .particle {
                    transform: none !important;
                    transition: none !important;
                    animation: none !important;
                }
                
                .spec-card, .spec-card .floating-icon, .spec-card .particle-effect {
                    transform: none !important;
                    transition: none !important;
                    animation: none !important;
                }
                
                .spec-card:hover {
                    transform: none !important;
                }
                
                .particle, .journey-particle {
                    display: none !important;
                }
                
                .hero-bg, .journey-hero-bg {
                    background: linear-gradient(135deg, #051772 0%, #06000c 100%) !important;
                    animation: none !important;
                }
                
                .gallery-item:hover {
                    transform: none !important;
                }
                
                .timeline-item.visible {
                    opacity: 1 !important;
                    transform: none !important;
                }
                
                .journey-hero-bg, .journey-particles {
                    opacity: 0.3 !important;
                }
            }

            /* Motion disabled class for user toggle */
            .motion-disabled .hero-bg,
            .motion-disabled .hero-particles,
            .motion-disabled .gallery-item,
            .motion-disabled .timeline-item,
            .motion-disabled .particle {
                transform: none !important;
                transition: none !important;
                animation: none !important;
            }
            
            /* Ensure particles are visible by default */
            .hero-particles {
                z-index: 1;
            }
            
            /* Add some twinkling effect to particles */
            .particle:nth-child(3n) {
                animation-duration: 12s !important;
            }
            
            .particle:nth-child(3n+1) {
                animation-duration: 18s !important;
            }
            
            .particle:nth-child(3n+2) {
                animation-duration: 15s !important;
            }
            
            .motion-disabled .particle {
                display: none !important;
            }
            
            .motion-disabled .gallery-item:hover {
                transform: none !important;
            }
    
            body {
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
                line-height: 1.6;
                color: #333;
                background: #0a0a0a;
                overflow-x: hidden;
            }
    
            /* Smooth scrolling */
            html {
                scroll-behavior: smooth;
            }
    
            /* Floating Glass Navigation */
            .floating-nav {
                position: fixed;
                top: 2rem;
                left: 2rem;
                z-index: 1000;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 15px;
                padding: 0.8rem;
                transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                box-shadow: 
                    0 8px 32px rgba(0, 0, 0, 0.1),
                    0 0 20px rgba(255, 140, 0, 0.6),
                    0 0 40px rgba(255, 69, 0, 0.4),
                    0 0 60px rgba(255, 69, 0, 0.2);
                width: 40px;
                height: 40px;
                overflow: hidden;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .floating-nav:hover {
                width: 300px;
                height: auto;
                background: rgba(255, 255, 255, 0.15);
                box-shadow: 
                    0 12px 40px rgba(0, 0, 0, 0.2),
                    0 0 30px rgba(255, 140, 0, 0.4),
                    0 0 60px rgba(255, 69, 0, 0.3);
            }

            .nav-content {
                display: flex;
                align-items: center;
                gap: 0.8rem;
                white-space: nowrap;
                width: 100%;
            }

            .nav-icon {
                font-size: 1.2rem;
                color: white;
                text-align: center;
                flex-shrink: 0;
                text-shadow: 0 0 10px rgba(255, 140, 0, 0.8);
                filter: drop-shadow(0 0 5px rgba(255, 69, 0, 0.6));
            }

            .floating-nav:not(:hover) .nav-icon {
                margin: 0 auto;
            }

            .nav-links {
                list-style: none;
                margin: 0;
                padding: 0;
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
                opacity: 0;
                transform: translateX(-10px);
                transition: all 0.3s ease;
                flex: 1;
            }

            .floating-nav:hover .nav-links {
                opacity: 1;
                transform: translateX(0);
            }

            .nav-links a {
                color: rgba(255, 255, 255, 0.9);
                text-decoration: none;
                font-size: 0.9rem;
                font-weight: 500;
                padding: 0.4rem 0.8rem;
                border-radius: 8px;
                transition: all 0.3s ease;
                display: block;
            }

            .nav-links a:hover {
                color: white;
                background: rgba(255, 255, 255, 0.1);
                transform: translateX(5px);
            }

            /* Motion toggle in floating nav */
            .motion-toggle {
                background: none;
                border: none;
                color: rgba(255, 255, 255, 0.9);
                padding: 0.4rem 0.8rem;
                border-radius: 8px;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 0.9rem;
                font-weight: 500;
                margin-top: 0.5rem;
                width: 100%;
                text-align: left;
            }

            .motion-toggle:hover {
                color: white;
                background: rgba(255, 255, 255, 0.1);
            }
    
            /* Main Content */
            .main-content {
                margin-left: 0;
                min-height: 100vh;
            }
    
            /* Hero Section with Advanced Parallax */
            .hero {
                height: 100vh;
                position: relative;
                overflow: hidden;
                display: flex;
                align-items: center;
                justify-content: center;
                background: linear-gradient(135deg, #051772 0%, #06000c 100%);
            }
    
            .hero-bg {
                position: absolute;
                top: -10%;
                left: -10%;
                width: 120%;
                height: 120%;
                background: radial-gradient(circle at 20% 50%, rgba(255,255,255,0.1) 0%, transparent 50%),
                            radial-gradient(circle at 80% 20%, rgba(255,255,255,0.08) 0%, transparent 50%),
                            radial-gradient(circle at 40% 80%, rgba(255,255,255,0.06) 0%, transparent 50%);
                animation: floatBackground 20s ease-in-out infinite;
                will-change: transform; /* Performance hint */
            }
    
            @keyframes floatBackground {
                0%, 100% { transform: translateY(0px) rotate(0deg); }
                50% { transform: translateY(-30px) rotate(180deg); }
            }
    
            .hero-particles {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }
    
            .particle {
                position: absolute;
                width: 6px;
                height: 6px;
                background: rgba(193, 214, 7, 0.8);
                border-radius: 50%;
                animation: particleFloat 12s linear infinite;
                will-change: transform; /* Performance hint */
                box-shadow: 0 0 15px rgba(193, 214, 7, 0.8);
                filter: blur(0.5px);
            }
            
            /* Enhanced multicolored particle variety with blur effects */
            .particle:nth-child(5n) {
                background: rgba(255, 255, 255, 0.9);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.9), 0 0 40px rgba(255, 255, 255, 0.4);
                filter: blur(0.8px);
            }
            
            .particle:nth-child(7n) {
                background: rgba(255, 193, 7, 0.8);
                box-shadow: 0 0 18px rgba(255, 193, 7, 0.8), 0 0 35px rgba(255, 193, 7, 0.5);
                filter: blur(0.6px);
            }
            
            .particle:nth-child(11n) {
                background: rgba(193, 214, 7, 0.9);
                box-shadow: 0 0 16px rgba(193, 214, 7, 0.9), 0 0 32px rgba(193, 214, 7, 0.6);
                filter: blur(0.7px);
            }

            .particle:nth-child(13n) {
                background: rgba(255, 140, 0, 0.8);
                box-shadow: 0 0 22px rgba(255, 140, 0, 0.8), 0 0 45px rgba(255, 140, 0, 0.5);
                filter: blur(0.9px);
            }

            .particle:nth-child(17n) {
                background: rgba(102, 126, 234, 0.8);
                box-shadow: 0 0 19px rgba(102, 126, 234, 0.8), 0 0 38px rgba(102, 126, 234, 0.5);
                filter: blur(0.5px);
            }

            .particle:nth-child(19n) {
                background: rgba(118, 75, 162, 0.8);
                box-shadow: 0 0 17px rgba(118, 75, 162, 0.8), 0 0 34px rgba(118, 75, 162, 0.5);
                filter: blur(0.6px);
            }

            .particle:nth-child(23n) {
                background: rgba(255, 69, 0, 0.8);
                box-shadow: 0 0 21px rgba(255, 69, 0, 0.8), 0 0 42px rgba(255, 69, 0, 0.5);
                filter: blur(0.8px);
            }

            .particle:nth-child(29n) {
                background: rgba(0, 255, 255, 0.8);
                box-shadow: 0 0 24px rgba(0, 255, 255, 0.8), 0 0 48px rgba(0, 255, 255, 0.5);
                filter: blur(0.7px);
            }
    
            @keyframes particleFloat {
                0% { 
                    transform: translateY(100vh) translateX(0px) rotate(0deg) scale(0); 
                    opacity: 0; 
                }
                8% { 
                    opacity: 1; 
                    transform: translateY(92vh) translateX(15px) rotate(45deg) scale(1);
                }
                25% { 
                    transform: translateY(75vh) translateX(-8px) rotate(90deg) scale(1.1);
                }
                50% { 
                    transform: translateY(50vh) translateX(12px) rotate(180deg) scale(1.3);
                }
                75% { 
                    transform: translateY(25vh) translateX(-10px) rotate(270deg) scale(1.1);
                }
                92% { 
                    opacity: 1; 
                    transform: translateY(8vh) translateX(8px) rotate(315deg) scale(1);
                }
                100% { 
                    transform: translateY(-100px) translateX(0px) rotate(360deg) scale(0); 
                    opacity: 0; 
                }
            }
    
            .hero-content {
                text-align: center;
                color: rgb(223, 99, 17);
                z-index: 2;
                max-width: 900px;
                padding: 2rem;
            }
    
            .hero h1 {
                font-size: clamp(2.5rem, 5vw, 5rem);
                margin-bottom: 1rem;
                opacity: 0;
                animation: fadeInUp 1s ease 0.5s forwards;
                font-weight: 700;
                letter-spacing: -0.02em;
            }
    
            .hero .subtitle {
                font-size: clamp(1.2rem, 2vw, 1.8rem);
                opacity: 0.9;
                margin-bottom: 2rem;
                opacity: 0;
                animation: fadeInUp 1s ease 1s forwards;
                font-weight: 400;
            }
    
            .project-type-badge {
                display: inline-block;
                background: rgba(255,255,255,0.2);
                padding: 0.8rem 2rem;
                border-radius: 50px;
                margin-bottom: 2rem;
                backdrop-filter: blur(10px);
                opacity: 0;
                animation: fadeInUp 1s ease 1.5s forwards;
                font-weight: 600;
                border: 2px solid rgba(255,255,255,0.3);
            }
    
            .scroll-indicator {
                position: absolute;
                bottom: 2rem;
                left: 50%;
                transform: translateX(-50%);
                color: rgb(31, 17, 233);
                opacity: 0;
                animation: fadeInUp 1s ease 2s forwards;
            }
    
            .scroll-indicator::after {
                content: '';
                display: block;
                width: 2px;
                height: 30px;
                background: rgb(68, 14, 219);
                margin: 0.5rem auto;
                animation: scrollPulse 2s ease-in-out infinite;
            }
    
            @keyframes scrollPulse {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 1; }
            }
    
            @keyframes fadeInUp {
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
                from {
                    opacity: 0;
                    transform: translateY(40px);
                }
            }
    
            /* Content Sections */
            .content-section {
                padding: 6rem 2rem;
                position: relative;
                background: #fff;
                overflow: hidden;
                scroll-margin-top: 80px; /* Account for fixed sidebar */
            }
    
            .content-section:nth-child(even) {
                background: #f8f9fa;
            }

            /* Journey section with cosmic background */
            #journey.content-section {
                background: transparent;
                position: relative;
                min-height: 100vh;
                overflow: hidden;
            }

            /* Additional cosmic effects */
            #journey.content-section::after {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: 
                    radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.05) 0%, transparent 70%),
                    radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.03) 0%, transparent 60%);
                animation: cosmicPulse 8s ease-in-out infinite;
                z-index: 1;
            }

            @keyframes cosmicPulse {
                0%, 100% { opacity: 0.3; }
                50% { opacity: 0.6; }
            }

            #journey.content-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: 
                    linear-gradient(135deg, rgba(5, 23, 114, 0.8) 0%, rgba(6, 0, 12, 0.8) 100%),
                    radial-gradient(circle at 30% 20%, rgba(193, 214, 7, 0.2) 0%, transparent 50%),
                    radial-gradient(circle at 70% 80%, rgba(255, 193, 7, 0.15) 0%, transparent 50%);
                z-index: 0;
            }
    
            .content-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
                background: linear-gradient(45deg, #021777, #0a0014);
            }
    
            .container {
                max-width: 1200px;
                margin: 0 auto;
                position: relative;
                z-index: 10;
            }
    
            /* Enhanced section title parallax with triggered animation */
            .section-title {
                font-size: clamp(4rem, 12vw, 8rem); /* Start much larger for dramatic effect */
                margin-bottom: 3rem;
                text-align: center;
                position: relative;
                color: #2c3e50;
                font-weight: 700;
                transform: scale(2.5) translateY(100px) rotateX(15deg); /* Start very large, offset, and slightly rotated */
                opacity: 0.2; /* Start very faded */
                transition: all 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Longer, smoother transition */
                will-change: transform, opacity, font-size;
                z-index: 10;
                /* Add perspective for 3D effect */
                perspective: 1000px;
                transform-style: preserve-3d;
                /* Add text shadow for depth */
                text-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
                /* Add backdrop blur for modern effect */
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }

            /* Journey section title with light color for dark background */
            #journey .section-title {
                color: white;
                text-shadow: 0 0 30px rgba(255, 255, 255, 0.3);
            }

            .section-title.visible {
                transform: scale(1) translateY(0px) rotateX(0deg); /* Scale down to normal size and straighten */
                opacity: 1;
                font-size: clamp(2rem, 4vw, 3rem);
                text-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            }

            /* Add a subtle glow effect that intensifies as the title comes into view */
            .section-title::after {
                content: '';
                position: absolute;
                bottom: -15px;
                left: 50%;
                transform: translateX(-50%);
                width: 80px;
                height: 4px;
                background: linear-gradient(45deg, #667eea, #764ba2);
                border-radius: 2px;
                opacity: 0.8;
                transition: all 0.4s ease;
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
            }

            .section-title.visible::after {
                width: 120px;
                box-shadow: 0 0 30px rgba(102, 126, 234, 0.8);
            }

            .section-title::before {
                content: '';
                position: absolute;
                left: -3rem;
                top: 50%;
                width: 2rem;
                height: 3px;
                background: linear-gradient(45deg, #667eea, #764ba2);
                transform: translateY(-50%) scaleX(0);
                transition: transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                border-radius: 2px;
            }

            .section-title.visible::before {
                transform: translateY(-50%) scaleX(1);
            }

            /* Add floating sparkle to section titles */
            .section-title .title-sparkle {
                position: absolute;
                right: -2rem;
                top: 50%;
                transform: translateY(-50%) scale(0) rotate(0deg);
                font-size: 1.5rem;
                opacity: 0;
                transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                animation: titleSparkle 2s ease-in-out infinite;
            }

            .section-title.visible .title-sparkle {
                transform: translateY(-50%) scale(1) rotate(360deg);
                opacity: 1;
            }

            @keyframes titleSparkle {
                0%, 100% { transform: translateY(-50%) scale(1) rotate(0deg); }
                50% { transform: translateY(-50%) scale(1.2) rotate(180deg); }
            }
    
            /* Enhanced Gallery with Parallax */
            .gallery-container {
                position: relative;
                margin-top: 4rem;
            }
    
            .gallery-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 3rem;
                margin-top: 3rem;
            }
    
            .gallery-item {
                position: relative;
                overflow: hidden;
                border-radius: 20px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.1);
                transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                background: white;
                will-change: transform; /* Performance hint */
            }
    
            .gallery-item:hover {
                transform: translateY(-15px);
                box-shadow: 0 30px 60px rgba(0,0,0,0.15);
            }
    
            .gallery-item img {
                width: 100%;
                height: 300px;
                object-fit: cover;
                transition: transform 0.4s ease;
                transform: translateZ(0); /* Hardware acceleration */
            }
    
            .gallery-item:hover img {
                transform: scale(1.05);
            }
    
            .gallery-overlay {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, rgba(2, 15, 75, 0.9), rgba(17, 1, 32, 0.9));
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 0;
                transition: opacity 0.4s ease;
                padding: 2rem;
            }
    
            .gallery-item:hover .gallery-overlay {
                opacity: 1;
            }
    
            .gallery-overlay-content {
                text-align: center;
                color: rgb(248, 173, 74);
                background: rgba(0, 0, 0, 0.8);
                padding: 1.5rem;
                border-radius: 10px;
                backdrop-filter: blur(10px);
            }
    
            .gallery-overlay-content h3 {
                font-size: 1.5rem;
                margin-bottom: 1rem;
                font-weight: 600;
            }
    
            .gallery-overlay-content p {
                font-size: 1.1rem;
                line-height: 1.6;
            }
    
            /* Art Project Masonry Layout */
            .art-gallery {
                columns: 3;
                column-gap: 2rem;
                margin-top: 3rem;
            }
    
            .art-gallery .gallery-item {
                break-inside: avoid;
                margin-bottom: 2rem;
                display: inline-block;
                width: 100%;
            }
    
            .art-gallery .gallery-item img {
                height: auto;
            }
    
            /* Enhanced Specifications Grid with Parallax */
            .spec-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 3rem;
                margin-top: 4rem;
                position: relative;
            }

            .spec-card {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                padding: 3rem;
                border-radius: 25px;
                box-shadow: 0 20px 60px rgba(102, 126, 234, 0.2);
                transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                border: none;
                position: relative;
                overflow: hidden;
                will-change: transform;
                backdrop-filter: blur(10px);
                transform: translateZ(0);
            }

            .spec-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
                opacity: 0;
                transition: opacity 0.4s ease;
                z-index: 1;
            }

            .spec-card::after {
                content: '';
                position: absolute;
                top: -50%;
                left: -50%;
                width: 200%;
                height: 200%;
                background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
                opacity: 0;
                transition: opacity 0.6s ease;
                transform: scale(0);
                z-index: 0;
            }

            .spec-card:hover {
                transform: translateY(-15px) scale(1.02);
                box-shadow: 0 30px 80px rgba(102, 126, 234, 0.4);
            }

            .spec-card:hover::before {
                opacity: 1;
            }

            .spec-card:hover::after {
                opacity: 1;
                transform: scale(1);
            }

            /* Floating elements inside spec cards */
            .spec-card .floating-icon {
                position: absolute;
                top: 1rem;
                right: 1rem;
                font-size: 2rem;
                opacity: 0.3;
                transition: all 0.4s ease;
                z-index: 2;
            }

            .spec-card:hover .floating-icon {
                opacity: 0.8;
                transform: rotate(15deg) scale(1.2);
            }

            /* Animated background patterns */
            .spec-card .bg-pattern {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-image: 
                    radial-gradient(circle at 20% 80%, rgba(255,255,255,0.1) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(255,255,255,0.05) 0%, transparent 50%);
                opacity: 0;
                transition: opacity 0.4s ease;
                z-index: 0;
            }

            .spec-card:hover .bg-pattern {
                opacity: 1;
            }

            .spec-card h3 {
                color: white;
                margin-bottom: 1.5rem;
                font-size: 1.6rem;
                font-weight: 700;
                position: relative;
                z-index: 2;
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }

            .spec-card p {
                color: rgba(255,255,255,0.9);
                line-height: 1.8;
                font-size: 1.1rem;
                position: relative;
                z-index: 2;
                text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            }

            /* Enhanced list styling */
            .spec-card ul {
                list-style: none;
                padding: 0;
                margin: 1rem 0;
                position: relative;
                z-index: 2;
            }

            .spec-card li {
                color: rgba(255,255,255,0.9);
                margin-bottom: 0.8rem;
                padding-left: 1.5rem;
                position: relative;
                line-height: 1.6;
            }

            .spec-card li::before {
                content: '✦';
                position: absolute;
                left: 0;
                color: rgba(255,255,255,0.7);
                font-weight: bold;
            }

            .spec-card h4 {
                color: rgba(255,255,255,0.95);
                font-size: 1.2rem;
                font-weight: 600;
                margin: 1rem 0 0.5rem 0;
                text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            }

            /* Staggered animation for cards */
            .spec-card:nth-child(1) { animation-delay: 0.1s; }
            .spec-card:nth-child(2) { animation-delay: 0.2s; }
            .spec-card:nth-child(3) { animation-delay: 0.3s; }
            .spec-card:nth-child(4) { animation-delay: 0.4s; }

            /* Parallax effect for spec cards */
            .spec-card[data-parallax="true"] {
                transform: translateZ(0);
                transition: transform 0.1s ease-out;
            }

            /* Entrance animation for spec cards */
            @keyframes specCardEntrance {
                0% {
                    opacity: 0;
                    transform: translateY(50px) scale(0.8);
                }
                100% {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }

            .spec-card {
                animation: specCardEntrance 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
                opacity: 0;
            }

            /* Floating animation for icons */
            @keyframes floatingIcon {
                0%, 100% { transform: translateY(0px) rotate(0deg); }
                50% { transform: translateY(-5px) rotate(5deg); }
            }

            .spec-card .floating-icon {
                animation: floatingIcon 3s ease-in-out infinite;
            }

            /* Pulse effect for background pattern */
            @keyframes bgPulse {
                0%, 100% { opacity: 0; transform: scale(1); }
                50% { opacity: 0.3; transform: scale(1.1); }
            }

            .spec-card:hover .bg-pattern {
                animation: bgPulse 2s ease-in-out infinite;
            }

            /* Enhanced content styling */
            .spec-content {
                position: relative;
                z-index: 2;
            }

            .spec-content p {
                margin-bottom: 1rem;
            }

            /* Additional section title effects */
            .section-title {
                background: linear-gradient(135deg, #2c3e50, #34495e);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                text-shadow: 0 4px 8px rgba(0,0,0,0.1);
            }

            .section-title.visible {
                background: linear-gradient(135deg, #667eea, #764ba2);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            /* Glowing effect for section titles */
            .section-title::before {
                box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
            }

            .section-title.visible::before {
                box-shadow: 0 0 30px rgba(102, 126, 234, 0.6);
            }

            /* Glowing border effect */
            .spec-card::before {
                content: '';
                position: absolute;
                top: -2px;
                left: -2px;
                right: -2px;
                bottom: -2px;
                background: linear-gradient(45deg, #667eea, #764ba2, #667eea);
                border-radius: 27px;
                z-index: -1;
                opacity: 0;
                transition: opacity 0.4s ease;
            }

            .spec-card:hover::before {
                opacity: 1;
            }

            /* Particle effect for spec cards */
            .spec-card .particle-effect {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                pointer-events: none;
                overflow: hidden;
                z-index: 1;
            }

            .spec-card .particle-effect::before,
            .spec-card .particle-effect::after {
                content: '';
                position: absolute;
                width: 4px;
                height: 4px;
                background: rgba(255,255,255,0.6);
                border-radius: 50%;
                animation: particleFloat 4s linear infinite;
            }

            .spec-card .particle-effect::before {
                top: 20%;
                left: 10%;
                animation-delay: 0s;
            }

            .spec-card .particle-effect::after {
                top: 60%;
                right: 15%;
                animation-delay: 2s;
            }

            @keyframes particleFloat {
                0% { transform: translateY(0px) scale(0); opacity: 0; }
                50% { transform: translateY(-20px) scale(1); opacity: 1; }
                100% { transform: translateY(-40px) scale(0); opacity: 0; }
            }

            /* Responsive adjustments for spec cards */
            @media (max-width: 768px) {
                .spec-card {
                    transform: none !important;
                    animation: none !important;
                    opacity: 1 !important;
                }
                
                .spec-card:hover {
                    transform: none !important;
                }
                
                .spec-card .floating-icon {
                    animation: none !important;
                }
            }
    
            /* Enhanced Tags */
            .tags {
                display: flex;
                flex-wrap: wrap;
                gap: 1rem;
                margin-top: 3rem;
                justify-content: center;
            }
    
            .tag {
                background: linear-gradient(45deg, #f8f9fa, #e9ecef);
                color: #6c757d;
                padding: 0.8rem 1.5rem;
                border-radius: 30px;
                font-size: 0.95rem;
                font-weight: 500;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
                border: 1px solid #dee2e6;
            }
    
            .tag::before {
                content: '';
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(0,0,0,0.05), transparent);
                transition: left 0.5s ease;
            }
    
            .tag:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 16px rgba(0,0,0,0.1);
                background: linear-gradient(45deg, #ffffff, #f8f9fa);
                color: #495057;
            }
    
            .tag:hover::before {
                left: 100%;
            }
    
            /* Links Section */
            .links-section {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
                gap: 2rem;
                margin-top: 4rem;
            }
    
            .link-card {
                background: linear-gradient(135deg, #02125c, #100120);
                color: white;
                padding: 3rem 2rem;
                border-radius: 20px;
                text-align: center;
                text-decoration: none;
                transition: all 0.4s ease;
                display: block;
                position: relative;
                overflow: hidden;
            }
    
            .link-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, rgba(255,255,255,0.1), transparent);
                opacity: 0;
                transition: opacity 0.3s ease;
            }
    
            .link-card:hover::before {
                opacity: 1;
            }
    
            .link-card:hover {
                transform: translateY(-10px);
                box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
                color: white;
            }
    
            .link-card .icon {
                font-size: 2.5rem;
                margin-bottom: 1rem;
                display: block;
            }
    
            .link-card h3 {
                margin-bottom: 1rem;
                font-size: 1.5rem;
                font-weight: 600;
            }
    
            .link-card p {
                opacity: 0.9;
                font-size: 1.1rem;
            }
    
            /* Enhanced Journey Timeline with Hero Background */
            .timeline {
                position: relative;
                margin-top: 4rem;
                padding: 2rem 0;
                overflow: hidden;
                z-index: 10;
            }

            /* Hero background for journey section */
            .journey-hero-bg {
                position: absolute;
                top: -10%;
                left: -10%;
                width: 120%;
                height: 120%;
                background: 
                    radial-gradient(circle at 20% 50%, rgba(193, 214, 7, 0.3) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(255, 193, 7, 0.25) 0%, transparent 50%),
                    radial-gradient(circle at 40% 80%, rgba(255, 255, 255, 0.2) 0%, transparent 50%),
                    radial-gradient(circle at 60% 30%, rgba(102, 126, 234, 0.2) 0%, transparent 50%),
                    radial-gradient(circle at 10% 70%, rgba(118, 75, 162, 0.15) 0%, transparent 50%);
                animation: floatBackground 20s ease-in-out infinite;
                will-change: transform;
                z-index: 2;
                opacity: 0.3;
                transition: opacity 0.8s ease;
            }

            .journey-hero-bg.visible {
                opacity: 1;
            }

            /* Make journey background more visible by default */
            .journey-hero-bg {
                opacity: 0.3;
            }

            .journey-particles {
                opacity: 0.3;
            }

            /* Journey particles container */
            .journey-particles {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 3;
                opacity: 0.3;
                transition: opacity 0.8s ease;
            }

            .journey-particles.visible {
                opacity: 1;
            }

            .journey-particle {
                position: absolute;
                width: 6px;
                height: 6px;
                background: rgba(193, 214, 7, 1);
                border-radius: 50%;
                animation: journeyParticleFloat 12s linear infinite;
                will-change: transform;
                box-shadow: 0 0 15px rgba(193, 214, 7, 0.8), 0 0 30px rgba(193, 214, 7, 0.4);
            }

            /* Journey particle variety */
            .journey-particle:nth-child(5n) {
                background: rgba(255, 255, 255, 1);
                box-shadow: 0 0 20px rgba(255, 255, 255, 0.9), 0 0 40px rgba(255, 255, 255, 0.5);
            }

            .journey-particle:nth-child(7n) {
                background: rgba(255, 193, 7, 1);
                box-shadow: 0 0 18px rgba(255, 193, 7, 0.8), 0 0 35px rgba(255, 193, 7, 0.5);
            }

            .journey-particle:nth-child(11n) {
                background: rgba(102, 126, 234, 1);
                box-shadow: 0 0 16px rgba(102, 126, 234, 0.8), 0 0 32px rgba(102, 126, 234, 0.5);
            }

            .journey-particle:nth-child(13n) {
                background: rgba(118, 75, 162, 1);
                box-shadow: 0 0 14px rgba(118, 75, 162, 0.8), 0 0 28px rgba(118, 75, 162, 0.5);
            }

            @keyframes journeyParticleFloat {
                0% { 
                    transform: translateY(100vh) translateX(0px) rotate(0deg) scale(0); 
                    opacity: 0; 
                }
                10% { 
                    opacity: 1; 
                    transform: translateY(90vh) translateX(10px) rotate(36deg) scale(1);
                }
                50% { 
                    transform: translateY(50vh) translateX(-5px) rotate(180deg) scale(1.2);
                }
                90% { 
                    opacity: 1; 
                    transform: translateY(10vh) translateX(5px) rotate(324deg) scale(1);
                }
                100% { 
                    transform: translateY(-100px) translateX(0px) rotate(360deg) scale(0); 
                    opacity: 0; 
                }
            }
    
            .timeline::before {
                content: '';
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                width: 4px;
                height: 100%;
                background: linear-gradient(to bottom, #667eea, #764ba2);
                border-radius: 2px;
                z-index: 4;
            }

            /* Flowing arrows down the timeline */
            .timeline::after {
                content: '▼';
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                color: #667eea;
                font-size: 1.2rem;
                animation: flowDown 8s linear infinite;
                text-shadow: 0 0 10px rgba(102, 126, 234, 0.8);
            }

            @keyframes flowDown {
                0% {
                    top: 0;
                    opacity: 0;
                }
                10% {
                    opacity: 1;
                }
                90% {
                    opacity: 1;
                }
                100% {
                    top: 100%;
                    opacity: 0;
                }
            }

            /* Add multiple arrows with different delays */
            .timeline .flow-arrow-1 {
                content: '▼';
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                color: #667eea;
                font-size: 1rem;
                animation: flowDown 6s linear infinite;
                animation-delay: 0s;
                text-shadow: 0 0 8px rgba(102, 126, 234, 0.6);
                z-index: 5;
            }

            .timeline .flow-arrow-2 {
                content: '▼';
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                color: #764ba2;
                font-size: 0.8rem;
                animation: flowDown 10s linear infinite;
                animation-delay: 3s;
                text-shadow: 0 0 6px rgba(118, 75, 162, 0.6);
                z-index: 5;
            }

            .timeline .flow-arrow-3 {
                content: '▼';
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                color: #667eea;
                font-size: 0.9rem;
                animation: flowDown 7s linear infinite;
                animation-delay: 5s;
                text-shadow: 0 0 7px rgba(102, 126, 234, 0.5);
                z-index: 5;
            }
    
            .timeline-item {
                position: relative;
                margin-bottom: 4rem;
                width: 50%;
                padding: 2rem;
                opacity: 0;
                transform: translateY(50px);
                transition: all 0.8s ease;
                will-change: transform, opacity; /* Performance hint */
                z-index: 10;
            }
    
            .timeline-item:nth-child(odd) {
                left: 0;
                padding-right: 4rem;
                transform: translateY(50px) translateX(-50px);
            }
    
            .timeline-item:nth-child(even) {
                left: 50%;
                padding-left: 4rem;
                transform: translateY(50px) translateX(50px);
            }
    
            .timeline-item.visible {
                opacity: 1;
                transform: translateY(0) translateX(0);
            }
    
            .timeline-content {
                background: rgba(255, 255, 255, 0.95);
                backdrop-filter: blur(10px);
                padding: 2.5rem;
                border-radius: 20px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.1);
                position: relative;
                transition: all 0.4s ease;
                opacity: 0;
                transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                border: 1px solid rgba(255, 255, 255, 0.2);
            }
    
            .timeline-item.visible .timeline-content {
                opacity: 1;
            }
    
            .timeline-content:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            }
    
            .timeline-content::before {
                content: '';
                position: absolute;
                top: 50%;
                width: 30px;
                height: 30px;
                background: linear-gradient(45deg, #4252e6, #0c0118);
                border-radius: 50%;
                transform: translateY(-50%);
                border: 4px solid rgb(13, 2, 61);
                box-shadow: 0 0 0 4px #f8f9fa;
                z-index: 10;
            }
    
            .timeline-item:nth-child(odd) .timeline-content::before {
                right: -17px;
            }
    
            .timeline-item:nth-child(even) .timeline-content::before {
                left: -17px;
            }
    
            .timeline-content h3 {
                color: #2c3e50;
                margin-bottom: 1rem;
                font-size: 1.4rem;
                font-weight: 600;
            }
    
            .timeline-content p {
                color: #666;
                line-height: 1.7;
                font-size: 1.1rem;
            }
    
            /* Enhanced Mobile Responsiveness */
            @media (max-width: 768px) {
                .sidebar {
                    width: 100%;
                    transform: translateX(-100%);
                }

                /* Disable complex parallax on mobile for performance */
                .hero-bg {
                    animation: none;
                    transform: none;
                }
                
                .particle {
                    display: none;
                }
                
                /* Simplify timeline animations */
                .timeline-item {
                    transform: none !important;
                    opacity: 1 !important;
                }
                
                /* Optimize gallery for touch */
                .gallery-item {
                    transform: none;
                }
                
                .gallery-item:hover {
                    transform: none;
                }
                
                /* Mobile floating nav adjustments */
                .floating-nav {
                    top: 1rem;
                    left: 1rem;
                    width: 50px;
                    height: 50px;
                    box-shadow: 
                        0 8px 32px rgba(0, 0, 0, 0.1),
                        0 0 25px rgba(255, 140, 0, 0.7),
                        0 0 50px rgba(255, 69, 0, 0.5),
                        0 0 75px rgba(255, 69, 0, 0.3);
                }

                .floating-nav:hover {
                    width: 280px;
                    height: auto;
                }

                .nav-links a {
                    padding: 0.6rem 1rem;
                    min-height: 44px;
                    font-size: 1rem;
                }

                .motion-toggle {
                    padding: 0.6rem 1rem;
                    min-height: 44px;
                    font-size: 1rem;
                }

                /* Disable flowing arrows on mobile for performance */
                .timeline .flow-arrow-1,
                .timeline .flow-arrow-2,
                .timeline .flow-arrow-3 {
                    display: none;
                }

                /* Disable journey background effects on mobile for performance */
                .journey-hero-bg {
                    animation: none;
                }
                
                .journey-particle {
                    display: none;
                }
    
                .hero h1 {
                    font-size: 2.5rem;
                }
    
                .hero .subtitle {
                    font-size: 1.2rem;
                }
    
                .art-gallery {
                    columns: 1;
                }
    
                .timeline::before {
                    left: 30px;
                }
    
                .timeline-item {
                    width: 100%;
                    left: 0 !important;
                    padding-left: 4rem !important;
                    padding-right: 1rem !important;
                }
    
                .timeline-item:nth-child(odd) .timeline-content::before,
                .timeline-item:nth-child(even) .timeline-content::before {
                    left: -47px;
                    right: auto;
                }
    
                .links-section {
                    grid-template-columns: 1fr;
                }
    
                .content-section {
                    padding: 4rem 1rem;
                }
    
                .gallery-grid {
                    grid-template-columns: 1fr;
                }
            }
    
            /* Scroll Animations */
            .fade-in {
                opacity: 0;
                transform: translateY(50px);
                transition: all 0.8s ease;
            }
    
            .fade-in.visible {
                opacity: 1;
                transform: translateY(0);
            }
    
            .slide-in-left {
                opacity: 0;
                transform: translateX(-50px);
                transition: all 0.8s ease;
            }
    
            .slide-in-left.visible {
                opacity: 1;
                transform: translateX(0);
            }
    
            .slide-in-right {
                opacity: 0;
                transform: translateX(50px);
                transition: all 0.8s ease;
            }
    
            .slide-in-right.visible {
                opacity: 1;
                transform: translateX(0);
            }


    
            /* Loading Animation */
            .loading-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: linear-gradient(135deg, #142263, #17012c);
                z-index: 9999;
                display: flex;
                align-items: center;
                justify-content: center;
                opacity: 1;
                transition: opacity 0.5s ease;
            }
    
            .loading-overlay.hidden {
                opacity: 0;
                pointer-events: none;
            }
    
            .loader {
                width: 60px;
                height: 60px;
                border: 4px solid rgba(255,255,255,0.3);
                border-top: 4px solid white;
                border-radius: 50%;
                animation: spin 1s linear infinite;
            }
    
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* Performance mode styles */
            .performance-mode .particle,
            .performance-mode .hero-bg {
                animation: none !important;
                transform: none !important;
            }

            /* Image error state */
            .image-error {
                background: #f8f9fa;
                display: flex;
                align-items: center;
                justify-content: center;
                min-height: 200px;
                color: #6c757d;
                font-style: italic;
            }

            .image-error::before {
                content: 'Image not available';
            }

            /* No parallax fallback */
            .no-parallax .hero-bg,
            .no-parallax .particle {
                display: none;
            }

            .no-parallax .hero {
                background: linear-gradient(135deg, #051772 0%, #06000c 100%);
            }

            /* Gallery Modal Styles */
            .gallery-modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.95);
                z-index: 10000;
                display: none;
                align-items: center;
                justify-content: center;
            }

            .gallery-modal-content {
                position: relative;
                width: 95%;
                height: 95%;
                background: rgba(0, 0, 0, 0.8);
                border-radius: 20px;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            .gallery-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 1.5rem 2rem;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
            }

            .gallery-title {
                color: white;
                font-size: 1.5rem;
                margin: 0;
            }

            .gallery-close-btn {
                background: none;
                border: none;
                color: white;
                font-size: 2rem;
                cursor: pointer;
                padding: 0.5rem;
                border-radius: 50%;
                transition: background 0.3s ease;
            }

            .gallery-close-btn:hover {
                background: rgba(255, 255, 255, 0.2);
            }

            .gallery-modal-img-container {
                flex: 1;
                position: relative;
                display: flex;
                align-items: center;
                justify-content: center;
                overflow: hidden;
            }

            .gallery-modal-fullscreen-image {
                max-width: 100%;
                max-height: 100%;
                object-fit: contain;
                transition: opacity 0.4s ease-in-out, transform 0.4s ease-in-out;
            }

            .gallery-modal-fullscreen-image.fade-out {
                opacity: 0;
                transform: scale(0.95);
            }

            .gallery-modal-fullscreen-image.fade-in {
                opacity: 1;
                transform: scale(1);
            }

            .gallery-controls {
                display: flex;
                justify-content: center;
                gap: 1rem;
                padding: 1rem 2rem;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
            }

            .gallery-nav-btn {
                background: rgba(255, 255, 255, 0.2);
                border: none;
                color: white;
                padding: 0.8rem 1.5rem;
                border-radius: 25px;
                cursor: pointer;
                font-weight: 500;
                transition: all 0.3s ease;
                backdrop-filter: blur(10px);
            }

            .gallery-nav-btn:hover {
                background: rgba(255, 255, 255, 0.3);
                transform: translateY(-2px);
            }

            .gallery-info {
                text-align: center;
                color: rgba(255, 255, 255, 0.8);
                padding: 0.5rem;
                font-size: 0.9rem;
            }

            /* Hotspot Styles */
            .hotspot-btn {
                position: absolute;
                width: 32px;
                height: 32px;
                border-radius: 50%;
                background: rgba(255, 140, 0, 0.9);
                border: 3px solid rgba(255, 255, 255, 0.95);
                color: white;
                font-weight: bold;
                font-size: 16px;
                cursor: pointer;
                transform: translate(-50%, -50%);
                transition: all 0.3s ease;
                animation: hotspotPulse 2s infinite;
                z-index: 100;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            }

            @keyframes hotspotPulse {
                0% {
                    box-shadow: 0 0 0 0 rgba(255, 140, 0, 0.7), 0 4px 12px rgba(0, 0, 0, 0.3);
                }
                70% {
                    box-shadow: 0 0 0 15px rgba(255, 140, 0, 0), 0 4px 12px rgba(0, 0, 0, 0.3);
                }
                100% {
                    box-shadow: 0 0 0 0 rgba(255, 140, 0, 0), 0 4px 12px rgba(0, 0, 0, 0.3);
                }
            }

            .hotspot-btn:hover {
                transform: translate(-50%, -50%) scale(1.3);
                animation-play-state: paused;
                background: rgba(255, 140, 0, 1);
                border-color: rgba(255, 255, 255, 1);
                box-shadow: 0 6px 20px rgba(255, 140, 0, 0.4);
            }

            .hotspot-btn:active {
                transform: translate(-50%, -50%) scale(0.95);
            }

            /* Hotspot Count Indicator */
            .hotspot-count {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: rgba(255, 140, 0, 0.9);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: 600;
                z-index: 101;
                backdrop-filter: blur(10px);
                border: 2px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            }

            /* Hotspot Tooltip */
            .hotspot-tooltip {
                position: absolute;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 8px;
                font-size: 0.85rem;
                white-space: nowrap;
                opacity: 0;
                transform: translateY(10px);
                transition: all 0.3s ease;
                pointer-events: none;
                z-index: 102;
                backdrop-filter: blur(5px);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .hotspot-btn:hover .hotspot-tooltip {
                opacity: 1;
                transform: translateY(0);
            }

            .hotspot-detail-panel {
                position: absolute;
                bottom: 2rem;
                left: 50%;
                transform: translateX(-50%) translateY(20px);
                background: rgba(0, 0, 0, 0.95);
                backdrop-filter: blur(20px);
                color: white;
                padding: 2.5rem;
                border-radius: 20px;
                width: 90%;
                max-width: 550px;
                opacity: 0;
                transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                pointer-events: none;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
                border: 1px solid rgba(255, 255, 255, 0.15);
            }

            .hotspot-detail-panel.visible {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
                pointer-events: auto;
            }

            .close-panel-btn {
                position: absolute;
                top: 1.5rem;
                right: 1.5rem;
                background: rgba(255, 255, 255, 0.1);
                border: 1px solid rgba(255, 255, 255, 0.2);
                color: rgba(255, 255, 255, 0.8);
                font-size: 1.5rem;
                cursor: pointer;
                transition: all 0.2s ease;
                width: 32px;
                height: 32px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .close-panel-btn:hover {
                background: rgba(255, 255, 255, 0.2);
                color: white;
                transform: scale(1.1);
            }

            #hotspot-title {
                color: #ff8c00;
                margin: 0 0 1.5rem 0;
                font-size: 1.4rem;
                font-weight: 600;
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }

            #hotspot-description {
                margin: 0;
                line-height: 1.7;
                color: rgba(255, 255, 255, 0.95);
                font-size: 1rem;
            }

            /* Enhanced Gallery Item Styles with Ken Burns Effect */
            .gallery-item {
                position: relative;
                overflow: hidden;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
                cursor: pointer;
                background: #f8f9fa;
            }

            .gallery-item:hover {
                transform: translateY(-10px) scale(1.02);
                box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
            }

            .gallery-item img {
                width: 100%;
                height: 250px;
                object-fit: cover;
                transition: transform 0.8s ease-in-out;
            }

            .gallery-item:hover img {
                transform: scale(1.1);
            }

            .gallery-overlay {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(to top, rgba(0, 0, 0, 0.8) 0%, rgba(0, 0, 0, 0.4) 50%, transparent 100%);
                color: white;
                padding: 1.5rem;
                display: flex;
                align-items: flex-end;
                opacity: 0;
                transition: opacity 0.4s ease;
            }

            .gallery-item:hover .gallery-overlay {
                opacity: 1;
            }

            .gallery-overlay-content {
                transform: translateY(20px);
                transition: transform 0.4s ease;
            }

            .gallery-item:hover .gallery-overlay-content {
                transform: translateY(0);
            }

            .gallery-overlay-content h3 {
                margin: 0 0 0.5rem 0;
                font-size: 1.2rem;
                font-weight: 600;
            }

            .gallery-overlay-content p {
                margin: 0;
                font-size: 0.9rem;
                opacity: 0.9;
                line-height: 1.4;
            }

            /* Click Me Badge */
            .click-badge {
                position: absolute;
                top: 1rem;
                right: 1rem;
                background: rgba(255, 140, 0, 0.9);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.8rem;
                font-weight: 600;
                z-index: 10;
                animation: pulse 2s infinite;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
            }

            @keyframes pulse {
                0%, 100% { transform: scale(1); opacity: 0.9; }
                50% { transform: scale(1.05); opacity: 1; }
            }

            /* Process and Inspiration Section Animations */
            .process-content, .inspiration-content {
                opacity: 0;
                transform: translateY(50px);
                transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }

            .process-content.visible, .inspiration-content.visible {
                opacity: 1;
                transform: translateY(0);
            }

            /* Enhanced section animations */
            #process.content-section, #inspiration.content-section {
                position: relative;
                overflow: hidden;
            }

            #process.content-section::before, #inspiration.content-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(45deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
                opacity: 0;
                transition: opacity 0.8s ease;
                z-index: 0;
            }

            #process.content-section.visible::before, #inspiration.content-section.visible::before {
                opacity: 1;
            }

            /* Section content styling */
            .section-content {
                position: relative;
                z-index: 1;
                padding: 2rem;
                color: var(--text-primary);
                line-height: 1.7;
            }

            .section-content h3 {
                color: var(--accent-primary);
                margin-bottom: 1rem;
                font-size: 1.5rem;
            }

            .section-content h4 {
                color: var(--accent-secondary);
                margin: 1.5rem 0 0.5rem 0;
                font-size: 1.2rem;
            }

            .section-content p {
                margin-bottom: 1rem;
                color: var(--text-primary);
            }

            /* Bottom Padding Section for Scroll Space */
            .bottom-padding-section {
                min-height: 50vh;
                background: linear-gradient(135deg, rgba(5, 23, 114, 0.02) 0%, rgba(6, 0, 12, 0.02) 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                overflow: hidden;
            }

            .bottom-padding-section::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: 
                    radial-gradient(circle at 20% 50%, rgba(193, 214, 7, 0.05) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(255, 193, 7, 0.03) 0%, transparent 50%);
                animation: floatBackground 30s ease-in-out infinite;
                z-index: 0;
            }

            .padding-content {
                text-align: center;
                color: rgba(255, 255, 255, 0.3);
                z-index: 1;
                position: relative;
            }

            .scroll-indicator-bottom {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
                opacity: 0.6;
                transition: opacity 0.3s ease;
            }

            .scroll-indicator-bottom:hover {
                opacity: 1;
            }

            .scroll-arrow-up {
                font-size: 2rem;
                animation: bounceUp 2s ease-in-out infinite;
                color: rgba(255, 140, 0, 0.6);
            }

            @keyframes bounceUp {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }

            /* Ensure sections have enough space to trigger animations */
            .content-section:last-of-type {
                margin-bottom: 2rem;
            }

            /* Footer Styles */
            .signature-footer {
                padding: 60px 20px;
                text-align: center;
                background: linear-gradient(135deg, rgba(5, 23, 114, 0.1) 0%, rgba(6, 0, 12, 0.1) 100%);
                box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.1);
                margin-top: 50px;
                position: relative;
                overflow: hidden;
            }

            .signature-footer::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: 
                    radial-gradient(circle at 20% 50%, rgba(193, 214, 7, 0.05) 0%, transparent 50%),
                    radial-gradient(circle at 80% 20%, rgba(255, 193, 7, 0.03) 0%, transparent 50%);
                animation: floatBackground 30s ease-in-out infinite;
                z-index: 0;
            }

            .footer-content {
                max-width: 600px;
                margin: 0 auto;
                position: relative;
                z-index: 1;
            }

            .footer-signature {
                font-family: 'Parisienne', cursive, serif;
                font-size: 3.5rem;
                color: #ff8c00;
                margin: 0 0 10px 0;
                line-height: 1;
                text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.3), -1px -1px 3px rgba(255, 255, 255, 0.1);
            }

            .footer-quote {
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
                font-style: italic;
                font-size: 1.1rem;
                color: rgba(255, 255, 255, 0.8);
                margin-bottom: 30px;
            }

            .footer-links {
                display: flex;
                justify-content: center;
                gap: 20px;
                margin-bottom: 40px;
            }

            .footer-button {
                background: transparent;
                border: none;
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
                font-size: 1rem;
                font-weight: 600;
                color: rgba(255, 255, 255, 0.8);
                cursor: pointer;
                padding: 10px;
                transition: color 0.3s ease;
                position: relative;
                z-index: 1;
            }

            .footer-button:hover {
                color: #ff8c00;
            }

            .footer-copyright {
                font-size: 0.9rem;
                color: rgba(255, 255, 255, 0.6);
                opacity: 0.8;
                position: relative;
                z-index: 1;
            }

            /* Modal Styles */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(8px);
                display: flex;
                justify-content: center;
                align-items: center;
                z-index: 10000;
                opacity: 0;
                visibility: hidden;
                transition: opacity 0.3s ease, visibility 0s 0.3s;
            }

            .modal-overlay.is-visible {
                opacity: 1;
                visibility: visible;
                transition-delay: 0s;
            }

            .modal-content {
                background: linear-gradient(135deg, #051772 0%, #06000c 100%);
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                padding: 40px;
                width: 90%;
                max-width: 650px;
                position: relative;
                transform: scale(0.95);
                transition: transform 0.3s ease;
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .modal-overlay.is-visible .modal-content {
                transform: scale(1);
            }

            .modal-close-btn {
                position: absolute;
                top: 15px;
                right: 20px;
                background: none;
                border: none;
                color: rgba(255, 255, 255, 0.7);
                font-size: 2rem;
                cursor: pointer;
                transition: color 0.2s ease;
            }

            .modal-close-btn:hover {
                color: white;
            }

            .modal-tabs {
                display: flex;
                gap: 10px;
                margin-bottom: 30px;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .tab-button {
                background: none;
                border: none;
                color: rgba(255, 255, 255, 0.7);
                padding: 10px 20px;
                cursor: pointer;
                font-size: 1rem;
                font-weight: 500;
                transition: all 0.3s ease;
                border-bottom: 2px solid transparent;
            }

            .tab-button:hover {
                color: white;
            }

            .tab-button.active {
                color: #ff8c00;
                border-bottom-color: #ff8c00;
            }

            .modal-body .tab-content {
                display: none;
            }

            .modal-body .tab-content.active {
                display: block;
            }

            #contactForm .form-group {
                margin-bottom: 20px;
            }

            #contactForm label {
                display: block;
                margin-bottom: 5px;
                color: rgba(255, 255, 255, 0.9);
                font-weight: 500;
            }

            #contactForm input,
            #contactForm textarea {
                width: 100%;
                padding: 12px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                border-radius: 8px;
                background: rgba(255, 255, 255, 0.1);
                color: white;
                font-size: 1rem;
            }

            #contactForm input:focus,
            #contactForm textarea:focus {
                outline: none;
                border-color: #ff8c00;
                box-shadow: 0 0 0 2px rgba(255, 140, 0, 0.2);
            }

            .form-submit-btn {
                background: linear-gradient(45deg, #ff8c00, #ff6b35);
                color: white;
                border: none;
                padding: 12px 30px;
                border-radius: 25px;
                font-size: 1rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
            }

            .form-submit-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 20px rgba(255, 140, 0, 0.3);
            }
        </style>
    </head>
    <body>
        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loader"></div>
        </div>
    
        <!-- Floating Glass Navigation -->
        <nav class="floating-nav" id="floatingNav">
            <div class="nav-content">
                <div class="nav-icon">🧭</div>
                <ul class="nav-links">
                    <li><a href="index.html">🏠 Portfolio</a></li>
                    <li><a href="#home">🏠 Home</a></li>
                    <li><a href="#overview">📋 Overview</a></li>
                    <li><a href="#gallery">🖼️ Gallery</a></li>
                    <li><a href="#journey">🚀 Journey</a></li>
                    <li><a href="#specs">⚙️ Specifications</a></li>
                    <li><a href="#links">🔗 Links</a></li>
                    <li><button class="motion-toggle" onclick="toggleMotion()" aria-label="Toggle motion effects">🎬 Stop Parallax</button></li>
                    <li class="theme-switcher-container">
                        <label for="theme-select">🎨 Theme</label>
                        <select id="theme-select" onchange="setTheme(this.value)" aria-label="Select website theme">
                            <option value="original">Original</option>
                            <option value="dark">Dark</option>
                            <option value="ocean">Ocean</option>
                            <option value="forest">Forest</option>
                            <option value="sunset">Sunset</option>
                            <option value="twilight">Twilight</option>
                            <option value="lavender">Lavender</option>
                        </select>
                    </li>
                </ul>
            </div>
        </nav>
    
        <!-- Main Content -->
        <main class="main-content" role="main">
            <!-- Hero Section -->
            <section class="hero" id="home" aria-label="Hero Section">
                <div class="hero-bg" aria-hidden="true"></div>
                <div class="hero-particles" aria-hidden="true" id="heroParticles"></div>
                <div class="hero-content">
                    <div class="project-type-badge" id="projectTypeBadge">Code Project</div>
                    <h1 id="projectTitle">Nova: Writer's Conspiracy</h1>
                    <p class="subtitle" id="projectSubtitle">"They said creation was lonely. They were wrong. We never create alone."</p>
                </div>
                <div class="scroll-indicator">
                    <span>Scroll to explore</span>
                </div>
            </section>
    
            <!-- Overview Section -->
            <section class="content-section fade-in" id="overview" aria-label="Project Overview">
                <div class="container">
                    <h2 class="section-title">Project Overview<span class="title-sparkle">✨</span></h2>
                    <p id="projectDescription">This project represents a comprehensive exploration of modern web development techniques, combining cutting-edge design principles with robust functionality. The goal was to create an immersive user experience that showcases creative work while maintaining accessibility and performance standards.</p>
                    
                    <div class="tags" id="projectTags">
                        <span class="tag">React</span>
                        <span class="tag">JavaScript</span>
                        <span class="tag">CSS3</span>
                        <span class="tag">Responsive Design</span>
                        <span class="tag">Parallax</span>
                        <span class="tag">Animation</span>
                    </div>
                </div>
            </section>
    
            <!-- Gallery Section -->
            <section class="content-section fade-in" id="gallery" aria-label="Project Gallery">
                <div class="container">
                    <h2 class="section-title">Gallery<span class="title-sparkle">✨</span></h2>
                    <div class="gallery-container">
                        <div class="gallery-grid" id="galleryGrid">
                            <!-- Loading indicator -->
                            <div id="galleryLoadingIndicator" class="section-loading-indicator">
                                <div class="loading-spinner"></div>
                                <p>Loading gallery...</p>
                            </div>
                            <!-- Gallery items will be populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </section>
    
            <!-- Journey Section -->
            <section class="content-section fade-in" id="journey" aria-label="Development Journey">
                <div class="container">
                    <h2 class="section-title">Development Journey<span class="title-sparkle">✨</span></h2>
                    <div class="timeline" id="timelineContainer">
                        <!-- Loading indicator -->
                        <div id="journeyLoadingIndicator" class="journey-loading-indicator">
                            <div class="loading-spinner"></div>
                            <p>Loading development journey...</p>
                        </div>
                        <!-- Timeline items will be populated by JavaScript -->
                    </div>
                    <!-- Journey particles container for cosmic background effects -->
                    <div class="journey-particles" aria-hidden="true"></div>
                </div>
            </section>
    
            <!-- Specifications Section -->
            <section class="content-section fade-in" id="specs" aria-label="Unique Value Propositions">
                <div class="container">
                    <h2 class="section-title">Unique Value Propositions<span class="title-sparkle">✨</span></h2>
                    <div class="spec-grid" id="specsGrid">
                        <!-- Loading indicator -->
                        <div id="specsLoadingIndicator" class="section-loading-indicator">
                            <div class="loading-spinner"></div>
                            <p>Loading specifications...</p>
                        </div>
                        <!-- Spec cards will be populated by JavaScript -->
                    </div>
                </div>
            </section>
    
            <!-- Links Section -->
            <section class="content-section fade-in" id="links" aria-label="Project Links">
                <div class="container">
                    <h2 class="section-title">Project Links<span class="title-sparkle">✨</span></h2>
                    <div class="links-section" id="linksSection">
                        <!-- Link cards will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Art Project Sections -->
            <section class="content-section fade-in" id="process" aria-label="Creative Process" style="display: none;">
                <div class="container">
                    <h2 class="section-title">Creative Process<span class="title-sparkle">🎨</span></h2>
                    <div class="process-content" id="processContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <section class="content-section fade-in" id="inspiration" aria-label="Inspiration & Influences" style="display: none;">
                <div class="container">
                    <h2 class="section-title">Inspiration & Influences<span class="title-sparkle">💡</span></h2>
                    <div class="inspiration-content" id="inspirationContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Code Project Sections -->
            <section class="content-section fade-in" id="artifacts" aria-label="Project Artifacts" style="display: none;">
                <div class="container">
                    <h2 class="section-title">Project Artifacts<span class="title-sparkle">💾</span></h2>
                    <div class="artifacts-grid" id="artifactsGrid">
                        <!-- Loading indicator -->
                        <div id="artifactsLoadingIndicator" class="section-loading-indicator">
                            <div class="loading-spinner"></div>
                            <p>Loading artifacts...</p>
                        </div>
                        <!-- Artifacts will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Writing Project Sections -->
            <section class="content-section fade-in" id="excerpts" aria-label="Excerpts" style="display: none;">
                <div class="container">
                    <h2 class="section-title">Excerpts<span class="title-sparkle">📖</span></h2>
                    <div class="excerpts-content" id="excerptsContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <section class="content-section fade-in" id="themes" aria-label="Themes & Analysis" style="display: none;">
                <div class="container">
                    <h2 class="section-title">Themes & Analysis<span class="title-sparkle">🧠</span></h2>
                    <div class="themes-content" id="themesContent">
                        <!-- Content will be populated by JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="signature-footer">
                <div class="footer-content">
                    <p class="footer-signature">R. Swan</p>
                    <p class="footer-quote">"Crafting worlds where story, art, and code converge."</p>
                    <div class="footer-links">
                         <button class="footer-button" data-modal-target="connectModal" data-tab-target="about">About Me</button>
                         <button class="footer-button" data-modal-target="connectModal" data-tab-target="contact">Connect With Me</button>
                    </div>
                </div>
                <p id="copyright" class="footer-copyright"></p>
            </footer>
        </main>
    
        <!-- Image Gallery Modal -->
        <div id="gallery-modal" class="gallery-modal-overlay" style="display: none;">
            <div class="gallery-modal-content">
                <div class="gallery-header">
                    <h3 class="gallery-title" id="gallery-modal-title">Art Gallery</h3>
                    <button class="gallery-close-btn" onclick="closeGalleryModal()">&times;</button>
                </div>
                <div class="gallery-modal-grid" id="gallery-modal-grid" style="display: none;">
                    <!-- Gallery items will be dynamically populated -->
                </div>
                <div class="gallery-modal-img-container" id="gallery-modal-img-container" style="display: none;">
                    <img id="gallery-main-img" class="gallery-modal-fullscreen-image" src="" alt="" />
                </div>
                <div class="gallery-controls" id="gallery-controls">
                    <button class="gallery-nav-btn" id="gallery-prev-btn" onclick="previousGalleryImage()">← Previous</button>
                    <button class="gallery-nav-btn" id="gallery-next-btn" onclick="nextGalleryImage()">Next →</button>
                </div>
                <div class="gallery-info" id="gallery-info">
                    <!-- Gallery info will be dynamically populated -->
                </div>
                <div class="hotspot-detail-panel" id="hotspot-detail-panel">
                    <button class="close-panel-btn" onclick="closeHotspotPanel()">&times;</button>
                    <h4 id="hotspot-title">Hotspot Title</h4>
                    <p id="hotspot-description">Hotspot description will appear here.</p>
                </div>
            </div>
        </div>

        <!-- Markdown Modal for Artifacts -->
        <div id="markdown-modal" class="markdown-modal-overlay" style="display: none;">
            <div class="markdown-modal-content">
                <div class="markdown-modal-header">
                    <h3 class="markdown-modal-title" id="markdown-modal-title">Document</h3>
                                    <div class="markdown-modal-controls">
                    <!-- Print and Download buttons temporarily disabled - see README.md for future plans -->
                    <button class="markdown-btn" disabled title="Print document (coming soon)">🖨️</button>
                    <button class="markdown-btn" disabled title="Download document (coming soon)">💾</button>
                    <button class="markdown-modal-close" onclick="closeMarkdownModal()">&times;</button>
                </div>
                </div>
                <div class="markdown-modal-body">
                    <div class="markdown-content" id="markdown-modal-content">
                        <!-- Markdown content will be rendered here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Structured Data for SEO -->
        <script type="application/ld+json" id="structuredData">
        {
            "@context": "https://schema.org",
            "@type": "CreativeWork",
            "name": "Loading...",
            "description": "Loading project details...",
            "author": {
                "@type": "Person",
                "name": "Ray Swan"
            }
        }
        </script>

        <!-- Enhanced JavaScript with Dynamic Project Loading -->
        <script>
            // Global variables for project management
            let currentProject = null;
            let projects = [];
            let currentGallery = [];
            let currentGalleryIndex = 0;
            let itemsPerPage = 12;

            // DOM elements for gallery modal
            let galleryModal = null;
            let galleryModalGrid = null;
            let galleryModalImgContainer = null;
            let galleryMainImg = null;
            let galleryHotspotPanel = null;

            // Motion control functionality
            let motionEnabled = true;

            function toggleMotion() {
                motionEnabled = !motionEnabled;
                document.body.classList.toggle('motion-disabled', !motionEnabled);
                
                const button = document.querySelector('.motion-toggle');
                button.innerHTML = motionEnabled ? 
                    '🎬 Stop Parallax' : 
                    '⏸️ Start Parallax';
            }

            // Check system preference on load
            if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                toggleMotion();
            }

            // Dynamic Project Loading System
            async function loadProjectData() {
                try {
                    // Get project ID from URL parameter
                    const urlParams = new URLSearchParams(window.location.search);
                    let projectId = urlParams.get('project') || urlParams.get('id');
                    
                    // Fallback: Check sessionStorage for backward compatibility
                    if (!projectId) {
                        const sessionProject = sessionStorage.getItem('currentProject');
                        if (sessionProject) {
                            try {
                                const project = JSON.parse(sessionProject);
                                projectId = project.id;
                                console.log('Using project from sessionStorage:', projectId);
                            } catch (e) {
                                console.error('Error parsing sessionStorage project:', e);
                            }
                        }
                    }
                    
                    if (!projectId) {
                        console.error('No project ID specified in URL or sessionStorage');
                        return null;
                    }

                    console.log('Loading project:', projectId);

                    // Try to load the specific project file
                    const response = await fetch(`_data/projects/${projectId}.json`);
                    if (!response.ok) {
                        throw new Error(`Failed to load project: ${response.status}`);
                    }

                    const project = await response.json();
                    
                    // Fix null or missing imageUrl - default to card-hero.jpg
                    if (!project.imageUrl || project.imageUrl === null) {
                        project.imageUrl = 'card-hero.jpg';
                    }
                    
                    // Ensure project ID matches the JSON filename for proper folder structure
                    if (!project.id || typeof project.id === 'number') {
                        project.id = projectId; // Use the filename as the ID for folder paths
                    }
                    
                    return project;
                } catch (error) {
                    console.error('Error loading project:', error);
                    // Return fallback project data
                    return getFallbackProject();
                }
            }

            function getFallbackProject() {
                return {
                    id: 'no-project',
                    title: 'No Project Specified',
                    description: 'Please select a project to view its details.',
                    medium: 'code',
                    gallery: [],
                    journey: [],
                    specs: []
                };
            }

            // Handle case when no project is specified
            function showProjectSelectionPage() {
                console.log('No project specified, showing project selection page');
                
                // Update page title
                document.title = 'Project Details - Select a Project';
                
                // Update hero section
                const projectTypeBadge = document.getElementById('projectTypeBadge');
                const projectTitle = document.getElementById('projectTitle');
                const projectSubtitle = document.getElementById('projectSubtitle');
                
                if (projectTypeBadge) projectTypeBadge.textContent = 'Project Selection';
                if (projectTitle) projectTitle.textContent = 'Select a Project';
                if (projectSubtitle) projectSubtitle.textContent = 'Choose a project from the portfolio to view its details';
                
                // Update overview section
                const projectDescription = document.getElementById('projectDescription');
                if (projectDescription) {
                    projectDescription.innerHTML = 'No project has been selected. Please return to the main portfolio and click on a project to view its details.';
                }
                
                // Update tags
                const projectTags = document.getElementById('projectTags');
                if (projectTags) {
                    projectTags.innerHTML = `
                        <span class="tag">Portfolio</span>
                        <span class="tag">Projects</span>
                        <span class="tag">Selection</span>
                    `;
                }
                
                // Show fallback content for all sections
                const galleryGrid = document.getElementById('galleryGrid');
                if (galleryGrid) {
                    galleryGrid.innerHTML = `
                        <div style="text-align: center; color: #666; padding: 4rem 2rem; background: rgba(255, 255, 255, 0.1); border-radius: 20px; backdrop-filter: blur(10px);">
                            <h3 style="margin-bottom: 1rem; color: #ff8c00;">Gallery</h3>
                            <p style="font-size: 1.1rem; line-height: 1.6;">Select a project to view its gallery.</p>
                        </div>
                    `;
                }
                
                const timelineContainer = document.getElementById('timelineContainer');
                if (timelineContainer) {
                    timelineContainer.innerHTML = `
                        <div style="text-align: center; color: white; padding: 4rem 2rem; background: rgba(255, 255, 255, 0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                            <h3 style="margin-bottom: 1rem; color: #ff8c00; font-size: 1.5rem;">Development Journey</h3>
                            <p style="font-size: 1.1rem; line-height: 1.6; opacity: 0.9;">Select a project to view its development journey.</p>
                        </div>
                    `;
                }
                
                const specsGrid = document.getElementById('specsGrid');
                if (specsGrid) {
                    specsGrid.innerHTML = `
                        <div style="text-align: center; color: white; padding: 4rem 2rem; background: rgba(255, 255, 255, 0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                            <h3 style="margin-bottom: 1rem; color: #ff8c00; font-size: 1.5rem;">Unique Value Propositions</h3>
                            <p style="font-size: 1.1rem; line-height: 1.6; opacity: 0.9;">Select a project to view its specifications and unique features.</p>
                        </div>
                    `;
                }
                
                const linksSection = document.getElementById('linksSection');
                if (linksSection) {
                    linksSection.innerHTML = `
                        <a href="index.html" class="link-card">
                            <span class="icon">🏠</span>
                            <h3>Back to Portfolio</h3>
                            <p>Return to the main portfolio to select a project</p>
                        </a>
                    `;
                }
            }

            // Project content population functions
            function updateProjectContent(project) {
                if (!project) return;

                console.log('Updating project content for:', project.title);
                console.log('Project medium:', project.medium);

                // Special handling for no project specified
                if (project.id === 'no-project') {
                    showProjectSelectionPage();
                    return;
                }

                // Update page metadata
                updatePageMetadata(project);

                // Update hero section
                updateHeroSection(project);

                // Update navigation based on project type
                updateNavigation(project);

                // Update overview section
                updateOverviewSection(project);

                // Show/hide sections based on project medium
                console.log('About to call showRelevantSections for project:', project.title);
                showRelevantSections(project);
                console.log('showRelevantSections completed');

                // Populate sections
                populateGallery(project);
                populateJourney(project);
                populateSpecs(project);
                populateLinks(project);

                // Initialize dynamic features
                initializeDynamicFeatures(project);
            }

            function updatePageMetadata(project) {
                document.title = `${project.title} - Project Details`;
                
                const metaDescription = document.querySelector('meta[name="description"]');
                if (metaDescription) {
                    metaDescription.content = project.description || project.pitch || project.title;
                }

                // Update structured data
                const structuredData = {
                    "@context": "https://schema.org",
                    "@type": "CreativeWork",
                    "name": project.title,
                    "description": project.description || project.pitch,
                    "author": {
                        "@type": "Person",
                        "name": "Ray Swan"
                    },
                    "genre": project.medium,
                    "dateCreated": project.year
                };

                const structuredDataElement = document.getElementById('structuredData');
                if (structuredDataElement) {
                    structuredDataElement.textContent = JSON.stringify(structuredData, null, 2);
                }
            }

            function updateHeroSection(project) {
                // Update hero content
                const projectTypeBadge = document.getElementById('projectTypeBadge');
                const projectTitle = document.getElementById('projectTitle');
                const projectSubtitle = document.getElementById('projectSubtitle');

                if (projectTypeBadge) {
                    const mediumMap = {
                        'art': 'Vision Project',
                        'writing': 'Words Project', 
                        'code': 'Systems Project'
                    };
                    projectTypeBadge.textContent = mediumMap[project.medium] || `${project.medium} Project`;
                }

                if (projectTitle) {
                    projectTitle.textContent = project.title;
                }

                if (projectSubtitle) {
                    projectSubtitle.textContent = project.pitch || project.description || project.subtitle || '';
                }

                // Set hero background image if available
                const heroSection = document.querySelector('.hero');
                if (heroSection && project.imageUrl) {
                    let heroImageUrl = project.imageUrl;
                    
                    // Handle relative paths - construct full path using project ID
                    if (!heroImageUrl.startsWith('http') && !heroImageUrl.startsWith('/') && !heroImageUrl.startsWith('images/')) {
                        heroImageUrl = `images/projects/${project.id}/${heroImageUrl}`;
                    }
                    
                    // Apply as background image with overlay
                    heroSection.style.backgroundImage = `linear-gradient(135deg, rgba(5, 23, 114, 0.8) 0%, rgba(6, 0, 12, 0.8) 100%), url('${heroImageUrl}')`;
                    heroSection.style.backgroundSize = 'cover';
                    heroSection.style.backgroundPosition = 'center';
                } else if (heroSection) {
                    // Default hero background if no image
                    heroSection.style.backgroundImage = 'linear-gradient(135deg, #051772 0%, #06000c 100%)';
                }
            }

            function updateNavigation(project) {
                const navLinks = document.querySelector('.nav-links');
                if (!navLinks) return;

                // Remove existing medium-specific links
                navLinks.querySelectorAll('.medium-specific-nav').forEach(el => el.remove());

                let specificLinks = [];
                switch (project.medium?.toLowerCase()) {
                    case 'code':
                        if (project.artifacts && project.artifacts.length > 0) {
                            specificLinks.push({ href: '#artifacts', text: '💾 Artifacts' });
                        }
                        break;
                    case 'art':
                        specificLinks.push({ href: '#process', text: '🎨 Process' });
                        specificLinks.push({ href: '#inspiration', text: '💡 Inspiration' });
                        break;
                    case 'writing':
                        if (project.excerpts) {
                            specificLinks.push({ href: '#excerpts', text: '📖 Excerpts' });
                        }
                        if (project.themes || project.themesAnalysis) {
                            specificLinks.push({ href: '#themes', text: '🧠 Themes' });
                        }
                        break;
                }

                const linksNavItem = navLinks.querySelector('a[href="#links"]')?.parentElement;
                if (linksNavItem) {
                    specificLinks.forEach(linkInfo => {
                        const li = document.createElement('li');
                        li.className = 'medium-specific-nav';
                        li.innerHTML = `<a href="${linkInfo.href}">${linkInfo.text}</a>`;
                        navLinks.insertBefore(li, linksNavItem);
                    });
                }
            }

            function updateOverviewSection(project) {
                const projectDescription = document.getElementById('projectDescription');
                if (projectDescription) {
                    // Use validated HTML rendering for security
                    renderValidatedHTML(projectDescription, project.description || project.pitch || '');
                }

                // Update tags
                const projectTags = document.getElementById('projectTags');
                if (projectTags) {
                    projectTags.innerHTML = '';
                    const tags = project.tech || project.genre || project.style || [];
                    tags.forEach(tag => {
                        const tagElement = document.createElement('span');
                        tagElement.className = 'tag';
                        tagElement.textContent = tag;
                        projectTags.appendChild(tagElement);
                    });
                }
            }

            function showRelevantSections(project) {
                console.log('showRelevantSections function called');
                // Hide all medium-specific sections first
                const sections = {
                    artifacts: document.getElementById('artifacts'),
                    process: document.getElementById('process'),
                    inspiration: document.getElementById('inspiration'),
                    excerpts: document.getElementById('excerpts'),
                    themes: document.getElementById('themes'),
                    journey: document.getElementById('journey')
                };
                
                console.log('Sections found:', {
                    artifacts: !!sections.artifacts,
                    process: !!sections.process,
                    inspiration: !!sections.inspiration,
                    excerpts: !!sections.excerpts,
                    themes: !!sections.themes,
                    journey: !!sections.journey
                });

                // Hide all sections initially
                Object.entries(sections).forEach(([key, section]) => {
                    if (section) {
                        section.style.display = 'none';
                    }
                });

                // Show relevant sections based on medium
                console.log('Project medium for section display:', project.medium);
                switch (project.medium?.toLowerCase()) {
                    case 'code':
                        // Show journey section for code projects
                        if (sections.journey) {
                            sections.journey.style.display = 'block';
                        }
                        if (sections.artifacts && project.artifacts) {
                            sections.artifacts.style.display = 'block';
                            populateArtifacts(project);
                        }
                        break;
                    case 'art':
                        console.log('Processing art project sections');
                        // Don't show journey section for art projects (Ken Burns effects not implemented)
                        if (sections.process) {
                            sections.process.style.display = 'block';
                            console.log('Process section display set to block');
                            const processContent = document.getElementById('processContent');
                            if (processContent) {
                                console.log('Found existing processContent, rendering content');
                                renderValidatedHTML(processContent, project.process || '<p>Details on the creative process for this project are coming soon.</p>');
                                console.log('Process content rendered, innerHTML length:', processContent.innerHTML.length);
                            } else {
                                console.log('Creating new processContent container');
                                // Create process content container if it doesn't exist
                                const processSection = document.getElementById('process');
                                if (processSection) {
                                    const newProcessContent = document.createElement('div');
                                    newProcessContent.id = 'processContent';
                                    newProcessContent.className = 'section-content';
                                    processSection.appendChild(newProcessContent);
                                    renderValidatedHTML(newProcessContent, project.process || '<p>Details on the creative process for this project are coming soon.</p>');
                                    console.log('New process content rendered, innerHTML length:', newProcessContent.innerHTML.length);
                                } else {
                                    console.error('Process section not found!');
                                }
                            }
                        } else {
                            console.error('Process section not available in sections object');
                        }
                        if (sections.inspiration) {
                            sections.inspiration.style.display = 'block';
                            console.log('Inspiration section display set to block');
                            const inspirationContent = document.getElementById('inspirationContent');
                            if (inspirationContent) {
                                console.log('Found existing inspirationContent, rendering content');
                                renderValidatedHTML(inspirationContent, project.inspiration || '<p>Information about inspirations and influences for this project are coming soon.</p>');
                                console.log('Inspiration content rendered, innerHTML length:', inspirationContent.innerHTML.length);
                            } else {
                                console.log('Creating new inspirationContent container');
                                // Create inspiration content container if it doesn't exist
                                const inspirationSection = document.getElementById('inspiration');
                                if (inspirationSection) {
                                    const newInspirationContent = document.createElement('div');
                                    newInspirationContent.id = 'inspirationContent';
                                    newInspirationContent.className = 'section-content';
                                    inspirationSection.appendChild(newInspirationContent);
                                    renderValidatedHTML(newInspirationContent, project.inspiration || '<p>Information about inspirations and influences for this project are coming soon.</p>');
                                    console.log('New inspiration content rendered, innerHTML length:', newInspirationContent.innerHTML.length);
                                } else {
                                    console.error('Inspiration section not found!');
                                }
                            }
                        } else {
                            console.error('Inspiration section not available in sections object');
                        }
                        break;
                    case 'writing':
                        // Show journey section for writing projects
                        if (sections.journey) {
                            sections.journey.style.display = 'block';
                        }
                        if (sections.excerpts && project.excerpts) {
                            sections.excerpts.style.display = 'block';
                            const excerptsContent = document.getElementById('excerptsContent');
                            if (excerptsContent) {
                                renderValidatedHTML(excerptsContent, project.excerpts);
                            }
                        }
                        if (sections.themes && (project.themes || project.themesAnalysis)) {
                            sections.themes.style.display = 'block';
                            const themesContent = document.getElementById('themesContent');
                            if (themesContent) {
                                renderValidatedHTML(themesContent, project.themesAnalysis || project.themes || '');
                            }
                        }
                        break;
                }
            }

            // Gallery functionality with hotspots support
            function populateGallery(project) {
                const galleryGrid = document.getElementById('galleryGrid');
                const loadingIndicator = document.getElementById('galleryLoadingIndicator');
                
                if (!galleryGrid) return;

                // Show loading indicator initially
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'flex';
                }

                console.log('Populating gallery for:', project.title);
                
                // Clear existing content
                galleryGrid.innerHTML = '';

                // Add loading indicator back
                if (loadingIndicator) {
                    galleryGrid.appendChild(loadingIndicator);
                }

                // Simulate loading delay for better UX
                setTimeout(() => {
                    const gallery = project.gallery || [];
                    
                    // Hide loading indicator
                    if (loadingIndicator) {
                        loadingIndicator.style.display = 'none';
                    }
                    
                    if (gallery.length === 0) {
                        galleryGrid.innerHTML = '<p class="text-center" style="color: var(--text-color-light);">No gallery images available for this project.</p>';
                        return;
                    }

                gallery.forEach((item, index) => {
                    const galleryItem = document.createElement('div');
                    galleryItem.className = 'gallery-item';
                    
                    // Construct full image path - project folders are based on JSON filename
                    let imageUrl = item.url;
                    if (!imageUrl.startsWith('http') && !imageUrl.startsWith('/') && !imageUrl.startsWith('images/')) {
                        // Use project ID to construct folder path (project ID should match JSON filename)
                        imageUrl = `images/projects/${project.id}/${item.url}`;
                    }
                    
                    galleryItem.innerHTML = `
                        <img src="${imageUrl}" alt="${item.title || 'Gallery image'}" loading="lazy">
                        <div class="gallery-overlay">
                            <div class="gallery-overlay-content">
                                <h3>${item.title || 'Image'}</h3>
                                <p>${item.description || ''}</p>
                            </div>
                        </div>
                        <div class="click-badge">Click Me</div>
                    `;
                    
                    // Add click listener to open modal
                    galleryItem.addEventListener('click', () => {
                        openGalleryModal(project, index);
                    });

                    galleryGrid.appendChild(galleryItem);
                });

                // Setup gallery parallax after population
                setTimeout(setupGalleryParallax, 100);
                
                console.log('Gallery content loaded successfully');
            }, 400); // 400ms delay for better UX
        }

            // Gallery Modal Functions
            function openGalleryModal(project, startIndex = 0) {
                console.log('Opening gallery modal for project:', project.title, 'starting at index', startIndex);
                
                if (!project || !project.gallery || project.gallery.length === 0) {
                    alert("No gallery images available for this project.");
                    return;
                }

                currentGallery = project.gallery;
                currentProject = project;
                
                // Initialize modal elements
                galleryModal = document.getElementById('gallery-modal');
                galleryModalGrid = document.getElementById('gallery-modal-grid');
                galleryModalImgContainer = document.getElementById('gallery-modal-img-container');
                galleryMainImg = document.getElementById('gallery-main-img');
                galleryHotspotPanel = document.getElementById('hotspot-detail-panel');

                const galleryModalTitle = document.getElementById('gallery-modal-title');
                if (galleryModalTitle) galleryModalTitle.textContent = `${project.title} Gallery`;

                // Clear previous content
                if (galleryModalGrid) galleryModalGrid.innerHTML = '';
                if (galleryHotspotPanel) galleryHotspotPanel.classList.remove('visible');

                // Determine if project is 'art' to use fullscreen/hotspot mode
                const isArtProject = project.medium?.toLowerCase() === 'art';

                if (isArtProject) {
                    // Art project: Show single full-screen image with navigation and hotspots
                    if (galleryModalGrid) galleryModalGrid.style.display = 'none';
                    if (galleryModalImgContainer) galleryModalImgContainer.style.display = 'flex';
                    
                    currentGalleryIndex = startIndex;
                    renderArtGalleryImage(currentGalleryIndex);
                } else {
                    // Other projects: Show grid view
                    if (galleryModalGrid) galleryModalGrid.style.display = 'grid';
                    if (galleryModalImgContainer) galleryModalImgContainer.style.display = 'none';
                    
                    currentGalleryIndex = Math.floor(startIndex / itemsPerPage);
                    renderGalleryPage();
                }

                // Show modal
                if (galleryModal) {
                    galleryModal.style.display = 'flex';
                }
            }

            function renderArtGalleryImage(index) {
                if (!currentGallery || index < 0 || index >= currentGallery.length) return;

                const item = currentGallery[index];
                
                if (galleryMainImg) {
                    // Add fade-out class for smooth transition
                    galleryMainImg.classList.add('fade-out');
                    
                    setTimeout(() => {
                        // Construct full image path if needed
                        let imageUrl = item.url;
                        if (!imageUrl.startsWith('http') && !imageUrl.startsWith('/') && !imageUrl.startsWith('images/')) {
                            imageUrl = `images/projects/${currentProject.id}/${item.url}`;
                        }
                        
                        // Update image
                        galleryMainImg.src = imageUrl;
                        galleryMainImg.alt = item.title || 'Gallery image';

                        // Clear previous hotspots
                        if (galleryModalImgContainer) {
                            galleryModalImgContainer.querySelectorAll('.hotspot-btn').forEach(btn => btn.remove());
                        }

                        // Add new hotspots if they exist
                        if (item.hotspots && item.hotspots.length > 0 && galleryModalImgContainer) {
                            // Add hotspot count indicator
                            const hotspotCount = document.createElement('div');
                            hotspotCount.className = 'hotspot-count';
                            hotspotCount.textContent = `${item.hotspots.length} interactive points`;
                            galleryModalImgContainer.appendChild(hotspotCount);

                            item.hotspots.forEach((hotspot, index) => {
                                const hotspotBtn = document.createElement('button');
                                hotspotBtn.className = 'hotspot-btn';
                                
                                // Handle both percentage strings ("25%") and numeric values (25)
                                const xValue = typeof hotspot.x === 'string' ? hotspot.x : `${hotspot.x}%`;
                                const yValue = typeof hotspot.y === 'string' ? hotspot.y : `${hotspot.y}%`;
                                
                                hotspotBtn.style.left = xValue;
                                hotspotBtn.style.top = yValue;
                                hotspotBtn.textContent = (index + 1).toString();

                                // Add tooltip
                                const tooltip = document.createElement('div');
                                tooltip.className = 'hotspot-tooltip';
                                tooltip.textContent = hotspot.title || 'Click for details';
                                tooltip.style.left = '50%';
                                tooltip.style.top = '-40px';
                                tooltip.style.transform = 'translateX(-50%)';
                                hotspotBtn.appendChild(tooltip);

                                // Add click animation and details
                                hotspotBtn.addEventListener('click', () => {
                                    // Add click animation
                                    hotspotBtn.style.transform = 'translate(-50%, -50%) scale(0.8)';
                                    setTimeout(() => {
                                        hotspotBtn.style.transform = 'translate(-50%, -50%) scale(1)';
                                    }, 150);
                                    
                                    showHotspotDetails(hotspot);
                                });

                                galleryModalImgContainer.appendChild(hotspotBtn);
                            });
                        } else {
                            // Remove hotspot count if no hotspots
                            const existingCount = galleryModalImgContainer.querySelector('.hotspot-count');
                            if (existingCount) existingCount.remove();
                        }

                        // Remove fade-out and add fade-in
                        galleryMainImg.classList.remove('fade-out');
                        galleryMainImg.classList.add('fade-in');

                        setTimeout(() => {
                            galleryMainImg.classList.remove('fade-in');
                        }, 400);

                    }, 200);
                }

                // Update info
                const galleryInfo = document.getElementById('gallery-info');
                if (galleryInfo) {
                    galleryInfo.textContent = `Image ${index + 1} of ${currentGallery.length} • ${item.title || 'Untitled'}`;
                }
            }

            function showHotspotDetails(hotspot) {
                if (!galleryHotspotPanel) return;

                const title = document.getElementById('hotspot-title');
                const description = document.getElementById('hotspot-description');

                if (title) title.textContent = hotspot.title || 'Details';
                if (description) description.textContent = hotspot.description || '';

                galleryHotspotPanel.classList.add('visible');
            }

            function closeHotspotPanel() {
                if (galleryHotspotPanel) {
                    galleryHotspotPanel.classList.remove('visible');
                }
            }

            function closeGalleryModal() {
                if (galleryModal) {
                    galleryModal.style.display = 'none';
                }
                if (galleryHotspotPanel) {
                    galleryHotspotPanel.classList.remove('visible');
                }
            }

            function previousGalleryImage() {
                if (currentProject?.medium?.toLowerCase() === 'art') {
                    currentGalleryIndex = Math.max(0, currentGalleryIndex - 1);
                    renderArtGalleryImage(currentGalleryIndex);
                }
            }

            function nextGalleryImage() {
                if (currentProject?.medium?.toLowerCase() === 'art') {
                    currentGalleryIndex = Math.min(currentGallery.length - 1, currentGalleryIndex + 1);
                    renderArtGalleryImage(currentGalleryIndex);
                }
            }

            // Setup parallax effects for gallery
            function setupGalleryParallax() {
                if (!motionEnabled) return;

                const galleryItems = document.querySelectorAll('.gallery-item');
                if (galleryItems.length === 0) return;

                const handleScroll = () => {
                    galleryItems.forEach((item, index) => {
                        const rect = item.getBoundingClientRect();
                        const windowHeight = window.innerHeight;
                        
                        if (rect.bottom > 0 && rect.top < windowHeight) {
                            const progress = 1 - (rect.top + rect.height / 2) / windowHeight;
                            const intensity = Math.sin(progress * Math.PI);
                            const translateY = -intensity * 20 * (1 + (index % 3) * 0.1);
                            
                            item.style.transform = `translateY(${translateY}px)`;
                        }
                    });
                };

                let ticking = false;
                window.addEventListener('scroll', () => {
                    if (!ticking) {
                        requestAnimationFrame(handleScroll);
                        ticking = true;
                    }
                }, { passive: true });
            }

            // Initialize the dynamic project system
            async function initializeDynamicProject() {
                console.log('Initializing dynamic project system...');
                
                try {
                    // Load project data
                    currentProject = await loadProjectData();
                    
                    if (currentProject) {
                        // Update all content based on project data
                        updateProjectContent(currentProject);
                        
                        // Set theme based on project mood
                        if (currentProject.mood) {
                            const theme = getThemeFromMood(currentProject.mood);
                            setTheme(theme);
                            console.log('Project mood theme applied:', currentProject.mood, '→', theme);
                        }
                        
                        // Initialize features based on support
                        if (supportsParallax() && motionEnabled) {
                            createParticles();
                            setupScrollAnimations();
                        }
                        
                        setupImageErrorHandling();
                    }
                } catch (error) {
                    console.error('Failed to initialize project:', error);
                }
                
                // Hide loading overlay
                setTimeout(() => {
                    const loadingOverlay = document.getElementById('loadingOverlay');
                    if (loadingOverlay) {
                        loadingOverlay.classList.add('hidden');
                    }
                }, 1000);
            }

            // Initialize when DOM is loaded
            document.addEventListener('DOMContentLoaded', function() {
                console.log('DOM loaded, initializing particle system...');
                initializeDynamicProject();
                
                // Initialize markdown renderer
                console.log('📚 Initializing markdown renderer...');
                if (typeof initializeMarkdownRenderer === 'function') {
                    initializeMarkdownRenderer().then(() => {
                        console.log('✅ Markdown renderer initialized');
                    }).catch(error => {
                        console.warn('⚠️ Markdown renderer initialization failed:', error);
                    });
                } else {
                    console.warn('⚠️ Markdown renderer function not found');
                }
                
                // Force particle creation after a short delay to ensure everything is ready
                setTimeout(() => {
                    console.log('Checking particle creation conditions:', {
                        supportsParallax: supportsParallax(),
                        motionEnabled: motionEnabled
                    });
                    if (supportsParallax() && motionEnabled) {
                        console.log('Forcing particle creation...');
                        createParticles();
                    } else {
                        console.log('Particle creation skipped - parallax:', supportsParallax(), 'motion:', motionEnabled);
                    }
                }, 500);
            });

            // Journey Timeline Population
            function populateJourney(project) {
                const timelineContainer = document.getElementById('timelineContainer');
                const loadingIndicator = document.getElementById('journeyLoadingIndicator');
                
                if (!timelineContainer) return;

                // Show loading indicator initially
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'flex';
                }

                // Clear existing content
                timelineContainer.innerHTML = '';

                // Add loading indicator back
                if (loadingIndicator) {
                    timelineContainer.appendChild(loadingIndicator);
                }

                // Load journey content immediately for better performance
                const journey = project.journey || [];
                
                // Hide loading indicator
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
                
                if (journey.length === 0) {
                    timelineContainer.innerHTML = `
                        <div style="text-align: center; color: white; padding: 4rem 2rem; background: rgba(255, 255, 255, 0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                            <h3 style="margin-bottom: 1rem; color: #ff8c00; font-size: 1.5rem;">Development Journey</h3>
                            <p style="font-size: 1.1rem; line-height: 1.6; opacity: 0.9;">No journey information available for this project yet. Check back soon for updates on the development process!</p>
                        </div>
                    `;
                    return;
                }

                journey.forEach((item, index) => {
                    const timelineItem = document.createElement('div');
                    timelineItem.className = 'timeline-item';
                    timelineItem.innerHTML = `
                        <div class="timeline-content">
                            <h3>${item.title}</h3>
                            <p>${item.description}</p>
                        </div>
                    `;
                    timelineContainer.appendChild(timelineItem);
                    
                    // Add staggered delay for sequential appearance
                    timelineItem.style.transitionDelay = `${index * 0.1}s`; // Reduced delay for faster appearance
                });

                // Setup timeline scroll animation
                setupTimelineScrollAnimation();
                
                console.log('Journey content loaded successfully');
            }

            // Specs Population
            function populateSpecs(project) {
                const specsGrid = document.getElementById('specsGrid');
                const loadingIndicator = document.getElementById('specsLoadingIndicator');
                
                if (!specsGrid) return;

                // Show loading indicator initially
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'flex';
                }

                console.log('Populating specs for:', project.title);
                
                // Clear existing content
                specsGrid.innerHTML = '';

                // Add loading indicator back
                if (loadingIndicator) {
                    specsGrid.appendChild(loadingIndicator);
                }

                // Load specs content immediately for better performance
                const specs = project.specs || [];
                
                // Hide loading indicator
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
                    
                    if (specs.length === 0) {
                        specsGrid.innerHTML = `
                            <div style="text-align: center; color: white; padding: 4rem 2rem; background: rgba(255, 255, 255, 0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);">
                                <h3 style="margin-bottom: 1rem; color: #ff8c00; font-size: 1.5rem;">Unique Value Propositions</h3>
                                <p style="font-size: 1.1rem; line-height: 1.6; opacity: 0.9;">No specifications available for this project yet. Check back soon for technical details and unique features!</p>
                            </div>
                        `;
                        return;
                    }

                    specs.forEach((spec, index) => {
                        const specCard = document.createElement('div');
                        specCard.className = 'spec-card';
                        
                        // Handle markdown content if available
                        let content = spec.description;
                        if (spec.markdown) {
                            content = spec.markdown;
                        }
                        
                        specCard.innerHTML = `
                            <div class="floating-icon">⚡</div>
                            <div class="bg-pattern"></div>
                            <div class="particle-effect"></div>
                            <h3>${spec.title}</h3>
                            <div class="spec-content">
                                <div class="markdown-content">${content}</div>
                            </div>
                        `;
                        specsGrid.appendChild(specCard);
                    });
                    
                    console.log('Specs content loaded successfully');
            }

            // Artifacts Population for Code Projects
            function populateArtifacts(project) {
                const artifactsGrid = document.getElementById('artifactsGrid');
                const loadingIndicator = document.getElementById('artifactsLoadingIndicator');
                
                if (!artifactsGrid) return;

                // Show loading indicator initially
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'flex';
                }

                console.log('Populating artifacts for:', project.title);
                
                // Clear existing content
                artifactsGrid.innerHTML = '';

                // Add loading indicator back
                if (loadingIndicator) {
                    artifactsGrid.appendChild(loadingIndicator);
                }

                // Load artifacts content immediately for better performance
                const artifacts = project.artifacts || [];
                
                // Hide loading indicator
                if (loadingIndicator) {
                    loadingIndicator.style.display = 'none';
                }
                    
                    if (artifacts.length === 0) {
                        artifactsGrid.innerHTML = '<p class="text-center" style="color: var(--text-color-light);">No project artifacts available for this project.</p>';
                        return;
                    }

                    artifacts.forEach(artifact => {
                        const artifactCard = document.createElement('div');
                        artifactCard.className = 'artifact-card';
                        
                        // Determine if this is a markdown file
                        const isMarkdown = artifact.url && (artifact.url.endsWith('.md') || artifact.url.includes('.md'));
                        const isExternal = artifact.url && artifact.url.startsWith('http');
                        
                        if (isMarkdown) {
                            // For markdown files, create a button that opens the modal
                            artifactCard.addEventListener('click', () => {
                                openArtifactMarkdownModal(artifact.url, artifact.name || artifact.title);
                            });
                            artifactCard.style.cursor = 'pointer';
                        } else if (isExternal) {
                            // For external links, create a link that opens in new tab
                            artifactCard.addEventListener('click', () => {
                                window.open(artifact.url, '_blank');
                            });
                            artifactCard.style.cursor = 'pointer';
                        } else if (artifact.url && artifact.url !== '#') {
                            // For local files, create a download link
                            artifactCard.addEventListener('click', () => {
                                downloadArtifact(artifact.url, artifact.name || artifact.title);
                            });
                            artifactCard.style.cursor = 'pointer';
                        }
                        
                        artifactCard.innerHTML = `
                            <span class="artifact-icon">${artifact.icon || '📄'}</span>
                            <h4>${artifact.name || artifact.title}</h4>
                            <p>${artifact.description}</p>
                            ${isMarkdown ? '<span class="artifact-link-icon">📖</span>' : ''}
                            ${isExternal ? '<span class="artifact-link-icon">🔗</span>' : ''}
                            ${!isMarkdown && !isExternal && artifact.url && artifact.url !== '#' ? '<span class="artifact-link-icon">💾</span>' : ''}
                        `;
                        artifactsGrid.appendChild(artifactCard);
                    });
                    
                    console.log('Artifacts content loaded successfully');
            }

            // Function to open markdown files in modal
            async function openArtifactMarkdownModal(url, title) {
                try {
                    console.log('Opening markdown modal for:', url, title);
                    
                    // Show loading state
                    const modal = document.getElementById('markdown-modal');
                    const modalTitle = document.getElementById('markdown-modal-title');
                    const modalContent = document.getElementById('markdown-modal-content');
                    
                    if (!modal || !modalTitle || !modalContent) {
                        console.error('Modal elements not found:', { modal: !!modal, modalTitle: !!modalTitle, modalContent: !!modalContent });
                        return;
                    }
                    
                    modalTitle.textContent = title;
                    modalContent.innerHTML = '<div class="markdown-loading">Loading document...</div>';
                    modal.style.display = 'flex';
                    
                    console.log('Modal displayed, fetching content from:', url);
                    
                    // Fetch the markdown content
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    
                    const markdownContent = await response.text();
                    console.log('Markdown content loaded, length:', markdownContent.length);
                    
                    // Render the markdown content
                    if (typeof renderMarkdown === 'function') {
                        console.log('renderMarkdown function found, rendering...');
                        const htmlContent = renderMarkdown(markdownContent);
                        console.log('Markdown rendered to HTML, length:', htmlContent.length);
                        modalContent.innerHTML = htmlContent;
                        
                        // Apply syntax highlighting if Prism is available
                        if (typeof Prism !== 'undefined') {
                            console.log('Prism found, applying syntax highlighting...');
                            Prism.highlightAllUnder(modalContent);
                        } else {
                            console.log('Prism not available for syntax highlighting');
                        }
                    } else {
                        console.warn('renderMarkdown function not found, using fallback');
                        // Fallback: display as plain text
                        modalContent.innerHTML = `<pre>${markdownContent}</pre>`;
                    }
                    
                    console.log('Modal content updated successfully');
                    
                } catch (error) {
                    console.error('Error loading markdown file:', error);
                    const modalContent = document.getElementById('markdown-modal-content');
                    if (modalContent) {
                        modalContent.innerHTML = `
                            <div class="markdown-error">
                                <h3>Error Loading Document</h3>
                                <p>Could not load the document from: ${url}</p>
                                <details>
                                    <summary>Error Details</summary>
                                    <pre>${error.message}</pre>
                                </details>
                            </div>
                        `;
                    }
                }
            }

            // Function to download artifacts
            function downloadArtifact(url, filename) {
                const link = document.createElement('a');
                link.href = url;
                link.download = filename || 'artifact';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }

            // Function to close markdown modal
            function closeMarkdownModal() {
                const modal = document.getElementById('markdown-modal');
                const modalContent = document.getElementById('markdown-modal-content');
                
                if (modal) {
                    modal.style.display = 'none';
                }
                
                if (modalContent) {
                    // Clear the content to free up memory
                    modalContent.innerHTML = '';
                }
                
                console.log('Markdown modal closed and cleaned up');
            }

            // Function to print markdown content
            function printMarkdownContent() {
                const modalContent = document.getElementById('markdown-modal-content');
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                        <head>
                            <title>Print Document</title>
                            <link rel="stylesheet" href="styles/markdown-styles.css">
                            <style>
                                body { font-family: Arial, sans-serif; margin: 20px; }
                                .markdown-content { max-width: none; }
                            </style>
                        </head>
                        <body>
                            ${modalContent.innerHTML}
                        </body>
                    </html>
                `);
                printWindow.document.close();
                printWindow.print();
            }

            // Function to download markdown content
            function downloadMarkdownContent() {
                const modalTitle = document.getElementById('markdown-modal-title');
                const modalContent = document.getElementById('markdown-modal-content');
                const filename = `${modalTitle.textContent.replace(/[^a-z0-9]/gi, '_').toLowerCase()}.html`;
                
                const blob = new Blob([modalContent.innerHTML], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }

            // Links Population
            function populateLinks(project) {
                const linksSection = document.getElementById('linksSection');
                if (!linksSection) return;

                console.log('Populating links for:', project.title);
                linksSection.innerHTML = '';

                // Create links from project.links object or default links
                const links = [];
                
                if (project.links) {
                    Object.entries(project.links).forEach(([key, url]) => {
                        const linkMap = {
                            'github': { icon: '📁', title: 'GitHub Repository', description: 'View source code' },
                            'live': { icon: '🌐', title: 'Live Demo', description: 'View the live website' },
                            'demo': { icon: '🌐', title: 'Live Demo', description: 'View the live website' },
                            'gallery': { icon: '🖼️', title: 'Full Gallery', description: 'View complete gallery' },
                            'shop': { icon: '🛒', title: 'Shop', description: 'Purchase prints or products' },
                            'docs': { icon: '📖', title: 'Documentation', description: 'Read detailed documentation' },
                            'specs': { icon: '📋', title: 'Specifications', description: 'Technical specifications' }
                        };
                        
                        const linkInfo = linkMap[key] || { icon: '🔗', title: key.charAt(0).toUpperCase() + key.slice(1), description: `View ${key}` };
                        links.push({
                            ...linkInfo,
                            url: url
                        });
                    });
                }

                // Removed "Back to Portfolio" link - now in floating navigation

                links.forEach(link => {
                    const linkCard = document.createElement('a');
                    linkCard.className = 'link-card';
                    linkCard.href = link.url;
                    linkCard.innerHTML = `
                        <span class="icon">${link.icon}</span>
                        <h3>${link.title}</h3>
                        <p>${link.description}</p>
                    `;
                    linksSection.appendChild(linkCard);
                });
            }

            // Initialize dynamic features after project load
            function initializeDynamicFeatures(project) {
                // Setup scroll animations
                setupScrollAnimations();
                
                // Setup parallax effects if supported
                if (supportsParallax() && motionEnabled) {
                    setupGalleryParallax();
                }
                
                // Setup image error handling
                setupImageErrorHandling();
                
                console.log('Dynamic features initialized for:', project.title);
            }

            // Create particle effects
            function createParticles() {
                const particlesContainer = document.getElementById('heroParticles');
                if (!particlesContainer) {
                    console.warn('Hero particles container not found');
                    return;
                }
                
                // Clear existing particles
                particlesContainer.innerHTML = '';
                
                const particleCount = 80; // Reduced for better performance
                
                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    
                    // Random positioning
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    
                    // Random sizes for variety
                    const size = Math.random() * 4 + 2; // 2-6px
                    particle.style.width = size + 'px';
                    particle.style.height = size + 'px';
                    
                    // Faster animation with more variety
                    particle.style.animationDelay = Math.random() * 10 + 's';
                    particle.style.animationDuration = (Math.random() * 5 + 8) + 's';
                    
                    // Random opacity for depth
                    particle.style.opacity = Math.random() * 0.8 + 0.2;
                    
                    // Ensure particles are visible with fallback colors
                    particle.style.backgroundColor = `hsl(${Math.random() * 60 + 30}, 70%, 60%)`;
                    particle.style.boxShadow = `0 0 ${size * 2}px hsl(${Math.random() * 60 + 30}, 70%, 60%)`;
                    
                    particlesContainer.appendChild(particle);
                }
                
                console.log('Created', particleCount, 'particles in hero area');
                
                // Also create journey particles if we're in a project detail view
                createJourneyParticles();
            }
            
            // Create journey-specific particles
            function createJourneyParticles() {
                const journeyContainer = document.querySelector('.journey-particles');
                if (!journeyContainer) {
                    console.warn('Journey particles container not found');
                    return;
                }
                
                // Clear existing journey particles
                journeyContainer.innerHTML = '';
                
                const journeyParticleCount = 40;
                
                for (let i = 0; i < journeyParticleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'journey-particle';
                    
                    // Random positioning
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    
                    // Random sizes
                    const size = Math.random() * 3 + 1; // 1-4px
                    particle.style.width = size + 'px';
                    particle.style.height = size + 'px';
                    
                    // Animation timing
                    particle.style.animationDelay = Math.random() * 8 + 's';
                    particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
                    
                    // Opacity
                    particle.style.opacity = Math.random() * 0.6 + 0.1;
                    
                    // Fallback colors for journey particles
                    particle.style.backgroundColor = `hsl(${Math.random() * 40 + 200}, 60%, 70%)`;
                    particle.style.boxShadow = `0 0 ${size * 1.5}px hsl(${Math.random() * 40 + 200}, 60%, 70%)`;
                    
                    journeyContainer.appendChild(particle);
                }
                
                console.log('Created', journeyParticleCount, 'journey particles');
            }

            // Setup scroll animations with triggered section title animation
            function setupScrollAnimations() {
                const observerOptions = {
                    threshold: 0.1, // Trigger when just 10% of the element is visible for earlier animation
                    rootMargin: '0px 0px -50px 0px' // Reduced margin for earlier triggering
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            // For section titles, add the 'visible' class to trigger the animation immediately
                            if (entry.target.classList.contains('section-title')) {
                                // Only trigger if not already animated
                                if (!entry.target.classList.contains('visible')) {
                                    // Immediate animation for better responsiveness
                                    entry.target.classList.add('visible');
                                }
                            } else {
                                // Handle other animated elements normally
                                entry.target.classList.add('visible');
                            }
                        }
                    });
                }, observerOptions);

                // Observe all animated elements
                document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right, .timeline-item, .section-title').forEach(el => {
                    observer.observe(el);
                });
            }

            // Setup timeline scroll animation
            function setupTimelineScrollAnimation() {
                const timelineItems = document.querySelectorAll('.timeline-item');
                
                const timelineObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            // Immediate animation for better responsiveness
                            entry.target.classList.add('visible');
                        }
                    });
                }, {
                    threshold: 0.1, // Earlier triggering
                    rootMargin: '0px 0px -50px 0px' // Reduced margin
                });

                timelineItems.forEach(item => {
                    timelineObserver.observe(item);
                });
            }

            // Image error handling
            function setupImageErrorHandling() {
                document.querySelectorAll('img').forEach(img => {
                    img.addEventListener('error', () => {
                        img.style.display = 'none';
                        if (img.parentElement) {
                            img.parentElement.classList.add('image-error');
                        }
                    });
                });
            }

            // Feature detection functions
            function supportsParallax() {
                return 'CSS' in window && 'supports' in CSS && 
                       CSS.supports('transform', 'translate3d(0, 0, 0)');
            }

            // Performance monitoring (keeping from original)
            let frameCount = 0;
            let lastTime = performance.now();
            let performanceMode = false;

            function monitorPerformance() {
                function checkPerformance(currentTime) {
                    frameCount++;
                    
                    if (currentTime - lastTime >= 1000) {
                        const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                        
                        if (fps < 30 && !performanceMode) {
                            console.warn('Low FPS detected:', fps, '- Enabling performance mode');
                            enablePerformanceMode();
                        }
                        
                        frameCount = 0;
                        lastTime = currentTime;
                    }
                    
                    requestAnimationFrame(checkPerformance);
                }
                
                requestAnimationFrame(checkPerformance);
            }

            function enablePerformanceMode() {
                performanceMode = true;
                document.body.classList.add('performance-mode');
                const particles = document.querySelectorAll('.particle');
                particles.forEach(particle => particle.style.display = 'none');
            }

            // Smooth scrolling for navigation links
            document.addEventListener('click', (e) => {
                if (e.target.matches('a[href^="#"]')) {
                    e.preventDefault();
                    const target = document.querySelector(e.target.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }
            });

            // Keyboard support for modal
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeGalleryModal();
                    closeHotspotPanel();
                }
                if (galleryModal && galleryModal.style.display === 'flex') {
                    if (e.key === 'ArrowLeft') {
                        previousGalleryImage();
                    } else if (e.key === 'ArrowRight') {
                        nextGalleryImage();
                    }
                }
            });

            // Close modal on overlay click
            document.addEventListener('click', (e) => {
                if (e.target.id === 'gallery-modal') {
                    closeGalleryModal();
                }
                if (e.target.id === 'markdown-modal') {
                    closeMarkdownModal();
                }
            });

            // Add keyboard support for modals
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeMarkdownModal();
                    if (galleryModal && galleryModal.style.display === 'flex') {
                        galleryModal.style.display = 'none';
                    }
                }
            });

            // Keep the existing motion and parallax functions from the original file
            // (The rest of the existing JavaScript functions remain the same)

            // Theme management functions
            function setTheme(themeName) {
                // Remove all existing theme classes
                document.body.classList.remove('theme-dark', 'theme-ocean', 'theme-forest', 'theme-sunset', 'theme-twilight', 'theme-lavender');
                
                // Add the new theme class (except for 'original' which has no class)
                if (themeName !== 'original') {
                    document.body.classList.add('theme-' + themeName);
                }
                
                // Save theme preference
                localStorage.setItem('selectedTheme', themeName);
                
                // Update theme selector
                const themeSelect = document.getElementById('theme-select');
                if (themeSelect) {
                    themeSelect.value = themeName;
                }
            }

            // Initialize theme on page load
            function initializeTheme() {
                // Check if we're on a project detail page with mood data
                if (window.currentProject && window.currentProject.mood) {
                    const moodTheme = getThemeFromMood(window.currentProject.mood);
                    setTheme(moodTheme);
                    console.log('Theme set from project mood:', window.currentProject.mood, '→', moodTheme);
                } else {
                    // Check for saved theme preference
                    const savedTheme = localStorage.getItem('selectedTheme');
                    if (savedTheme) {
                        setTheme(savedTheme);
                        console.log('Theme restored from localStorage:', savedTheme);
                    } else {
                        setTheme('original');
                        console.log('Default theme applied: original');
                    }
                }
            }

            // Call theme initialization after DOM is loaded
            document.addEventListener('DOMContentLoaded', function() {
                // Wait a bit for project data to load
                setTimeout(initializeTheme, 100);
            });

            // HTML Content Validation and Sanitization
            function sanitizeHTML(html) {
                if (!html) return '';
                
                // Create a temporary div to parse HTML
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = html;
                
                // Define allowed tags and attributes
                const allowedTags = ['p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'br', 'strong', 'em', 'u', 'blockquote', 'ul', 'ol', 'li', 'span', 'div', 'img'];
                const allowedAttributes = ['class', 'style', 'src', 'alt', 'title', 'width', 'height'];
                
                // Recursively sanitize nodes
                function sanitizeNode(node) {
                    if (node.nodeType === Node.TEXT_NODE) {
                        return node.cloneNode();
                    }
                    
                    if (node.nodeType === Node.ELEMENT_NODE) {
                        const tagName = node.tagName.toLowerCase();
                        
                        // Remove disallowed tags
                        if (!allowedTags.includes(tagName)) {
                            return document.createTextNode(node.textContent);
                        }
                        
                        // Create new element with same tag
                        const newElement = document.createElement(tagName);
                        
                        // Copy allowed attributes
                        for (let attr of node.attributes) {
                            if (allowedAttributes.includes(attr.name.toLowerCase())) {
                                // Basic style validation for style attributes
                                if (attr.name.toLowerCase() === 'style') {
                                    const sanitizedStyle = sanitizeStyle(attr.value);
                                    if (sanitizedStyle) {
                                        newElement.setAttribute(attr.name, sanitizedStyle);
                                    }
                                } else {
                                    newElement.setAttribute(attr.name, attr.value);
                                }
                            }
                        }
                        
                        // Recursively sanitize child nodes
                        for (let child of node.childNodes) {
                            const sanitizedChild = sanitizeNode(child);
                            if (sanitizedChild) {
                                newElement.appendChild(sanitizedChild);
                            }
                        }
                        
                        return newElement;
                    }
                    
                    return null;
                }
                
                // Sanitize style attributes
                function sanitizeStyle(styleString) {
                    if (!styleString) return '';
                    
                    // Remove potentially dangerous CSS properties
                    const dangerousProps = ['javascript:', 'expression(', 'url('];
                    const sanitized = dangerousProps.reduce((str, prop) => {
                        // Escape special regex characters in the property string
                        const escapedProp = prop.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                        return str.replace(new RegExp(escapedProp, 'gi'), '');
                    }, styleString);
                    
                    // Only allow safe CSS properties
                    const allowedProps = [
                        'color', 'background-color', 'font-size', 'font-weight', 'font-style',
                        'text-align', 'margin', 'padding', 'border', 'border-radius',
                        'line-height', 'text-decoration', 'display', 'position',
                        'top', 'left', 'right', 'bottom', 'width', 'height',
                        'opacity', 'transform', 'transition', 'animation'
                    ];
                    
                    const styleObj = {};
                    const stylePairs = sanitized.split(';');
                    
                    for (let pair of stylePairs) {
                        const [property, value] = pair.split(':').map(s => s.trim());
                        if (property && value && allowedProps.includes(property.toLowerCase())) {
                            styleObj[property] = value;
                        }
                    }
                    
                    return Object.entries(styleObj)
                        .map(([prop, val]) => `${prop}: ${val}`)
                        .join('; ');
                }
                
                // Sanitize the content
                const sanitizedContent = [];
                for (let child of tempDiv.childNodes) {
                    const sanitized = sanitizeNode(child);
                    if (sanitized) {
                        sanitizedContent.push(sanitized);
                    }
                }
                
                // Return sanitized HTML
                return sanitizedContent.map(node => {
                    if (node.nodeType === Node.TEXT_NODE) {
                        return node.textContent;
                    }
                    return node.outerHTML;
                }).join('');
            }

            // Enhanced content rendering with validation
            function renderValidatedHTML(container, htmlContent) {
                console.log('renderValidatedHTML called with:', { container: !!container, htmlContentLength: htmlContent?.length });
                if (!container) {
                    console.error('Container is null or undefined');
                    return;
                }
                
                const sanitized = sanitizeHTML(htmlContent);
                console.log('Content sanitized, length:', sanitized.length);
                container.innerHTML = sanitized;
                console.log('Content set to container, new innerHTML length:', container.innerHTML.length);
            }
        </script>

        <!-- Markdown Renderer Script -->
        <script src="js/markdown-renderer.js"></script>
    </body>
    </html>
    ```