<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovelForge AI - Complete Writing Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f8f9fa;
            color: #333;
            overflow-x: hidden;
        }

        /* Navigation Bar */
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            position: relative;
            z-index: 1000;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 20px;
            font-weight: 700;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 24px;
        }

        .nav-link {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
        }

        /* Main Content Area */
        .main-content {
            min-height: calc(100vh - 60px);
            transition: all 0.3s ease;
        }

        .view {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .view.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Dashboard View */
        .dashboard {
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-header {
            margin-bottom: 40px;
        }

        .dashboard-title {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .dashboard-subtitle {
            color: #6c757d;
            font-size: 16px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.15);
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .stat-label {
            color: #6c757d;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .projects-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
        }

        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 24px;
        }

        .project-card {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 24px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .project-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .project-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .project-meta {
            display: flex;
            justify-content: space-between;
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 12px;
        }

        .project-progress {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
            margin-bottom: 12px;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .project-collaborators {
            display: flex;
            gap: 8px;
        }

        .collaborator-avatar {
            width: 24px;
            height: 24px;
            background: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: white;
            font-weight: 600;
        }

        /* Chat Interface */
        .chat-container {
            height: calc(100vh - 60px);
            display: flex;
            background: white;
        }

        .chat-sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 1px solid #e9ecef;
            overflow-y: auto;
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
            background: white;
        }

        .chat-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 12px;
        }

        .agent-list {
            padding: 20px;
        }

        .agent-item {
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .agent-item:hover {
            background: white;
            border-color: #667eea;
        }

        .agent-item.active {
            background: #667eea;
            color: white;
        }

        .agent-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .agent-specialty {
            font-size: 12px;
            opacity: 0.7;
        }

        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            gap: 12px;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 14px;
        }

        .user .message-avatar {
            background: #667eea;
            color: white;
        }

        .agent .message-avatar {
            background: #28a745;
            color: white;
        }

        .message-content {
            max-width: 70%;
            background: white;
            padding: 16px 20px;
            border-radius: 18px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .user .message-content {
            background: #667eea;
            color: white;
        }

        .chat-input-area {
            padding: 20px;
            background: white;
            border-top: 1px solid #e9ecef;
        }

        .chat-input-group {
            display: flex;
            gap: 12px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e9ecef;
            border-radius: 24px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s ease;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .chat-send-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 24px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .chat-send-btn:hover {
            background: #5a6fd8;
        }

        /* Manuscript View */
        .manuscript-container {
            height: calc(100vh - 60px);
            display: flex;
        }

        .manuscript-toolbar {
            background: white;
            border-bottom: 1px solid #e9ecef;
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .toolbar-group {
            display: flex;
            gap: 20px;
        }

        .toolbar-btn {
            background: none;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        .toolbar-btn:hover {
            background: #f8f9fa;
        }

        .manuscript-editor {
            flex: 1;
            background: white;
            margin: 20px;
            margin-right: 10px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .editor-content {
            padding: 40px 60px;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
            font-size: 16px;
        }

        .chapter-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 40px;
            color: #2c3e50;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 12px;
        }

        .paragraph {
            margin-bottom: 20px;
            padding: 8px;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        .paragraph:hover {
            background: rgba(102, 126, 234, 0.05);
        }

        .comments-sidebar {
            width: 350px;
            background: white;
            margin: 20px 20px 20px 10px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow-y: auto;
        }

        .comments-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px 12px 0 0;
            font-weight: 600;
        }

        .comment-item {
            padding: 20px;
            border-bottom: 1px solid #e9ecef;
        }

        .comment-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .comment-author {
            font-weight: 600;
            color: #667eea;
        }

        .comment-time {
            font-size: 12px;
            color: #6c757d;
        }

        .comment-text {
            margin-bottom: 12px;
            line-height: 1.5;
        }

        .comment-actions {
            display: flex;
            gap: 8px;
        }

        .comment-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-accept {
            background: #28a745;
            color: white;
        }

        .btn-reject {
            background: #dc3545;
            color: white;
        }

        .btn-reply {
            background: #17a2b8;
            color: white;
        }

        /* Agent Interaction View */
        .agent-view {
            padding: 30px;
            max-width: 900px;
            margin: 0 auto;
        }

        .agent-card {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 8px 24px rgba(0,0,0,0.1);
        }

        .agent-task-title {
            text-align: center;
            font-size: 28px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .form-group {
            margin-bottom: 30px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 12px;
            color: #495057;
        }

        .form-select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            background: white;
            transition: border-color 0.3s ease;
        }

        .form-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            width: 100%;
            min-height: 150px;
            padding: 18px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .form-textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .send-btn {
            display: block;
            margin: 30px auto;
            padding: 16px 40px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(102, 126, 234, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 12px;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 12px;
            }

            .chat-container {
                flex-direction: column;
            }

            .chat-sidebar {
                width: 100%;
                height: 200px;
            }

            .manuscript-container {
                flex-direction: column;
            }

            .comments-sidebar {
                width: 100%;
                margin: 10px 20px;
                max-height: 300px;
            }

            .dashboard {
                padding: 20px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading States */
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            padding: 20px;
            color: #6c757d;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #e9ecef;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">
            <div class="logo-icon">N</div>
            NovelForge AI
        </div>
        <div class="nav-links">
            <button class="nav-link active" onclick="showView('dashboard')">Dashboard</button>
            <button class="nav-link" onclick="showView('chat')">AI Chat</button>
            <button class="nav-link" onclick="showView('manuscript')">Manuscript</button>
            <button class="nav-link" onclick="showView('agents')">Agents</button>
        </div>
        <div class="user-menu">
            <span>Sarah Chen</span>
            <div class="user-avatar">SC</div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard View -->
        <div id="dashboard" class="view active">
            <div class="dashboard">
                <div class="dashboard-header">
                    <h1 class="dashboard-title">Welcome back, Sarah!</h1>
                    <p class="dashboard-subtitle">Continue crafting your stories with AI-powered assistance</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">3</div>
                        <div class="stat-label">Active Projects</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">47,892</div>
                        <div class="stat-label">Words Written</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">156</div>
                        <div class="stat-label">AI Interactions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">8</div>
                        <div class="stat-label">Collaborators</div>
                    </div>
                </div>

                <div class="projects-section">
                    <div class="section-header">
                        <h2 class="section-title">Your Projects</h2>
                        <button class="btn-primary" onclick="createProject()">New Project</button>
                    </div>
                    <div class="project-grid">
                        <div class="project-card" onclick="openProject('steampunk')">
                            <h3 class="project-title">The Brass Conspiracies</h3>
                            <div class="project-meta">
                                <span>Steampunk Mystery</span>
                                <span>Last edited: 2 hours ago</span>
                            </div>
                            <div class="project-progress">
                                <div class="progress-bar" style="width: 65%"></div>
                            </div>
                            <div class="project-collaborators">
                                <div class="collaborator-avatar">M</div>
                                <div class="collaborator-avatar">J</div>
                                <div class="collaborator-avatar">+2</div>
                            </div>
                        </div>

                        <div class="project-card" onclick="openProject('fantasy')">
                            <h3 class="project-title">Chronicles of Aethermoor</h3>
                            <div class="project-meta">
                                <span>Epic Fantasy</span>
                                <span>Last edited: 1 day ago</span>
                            </div>
                            <div class="project-progress">
                                <div class="progress-bar" style="width: 30%"></div>
                            </div>
                            <div class="project-collaborators">
                                <div class="collaborator-avatar">L</div>
                                <div class="collaborator-avatar">K</div>
                            </div>
                        </div>

                        <div class="project-card" onclick="openProject('scifi')">
                            <h3 class="project-title">Neural Networks</h3>
                            <div class="project-meta">
                                <span>Cyberpunk Thriller</span>
                                <span>Last edited: 3 days ago</span>
                            </div>
                            <div class="project-progress">
                                <div class="progress-bar" style="width: 85%"></div>
                            </div>
                            <div class="project-collaborators">
                                <div class="collaborator-avatar">A</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Chat View -->
        <div id="chat" class="view">
            <div class="chat-container">
                <div class="chat-sidebar">
                    <div class="chat-header">
                        <h2 class="chat-title">AI Assistants</h2>
                        <p style="font-size: 14px; color: #6c757d;">Choose your writing companion</p>
                    </div>
                    <div class="agent-list">
                        <div class="agent-item active" onclick="selectAgent('plot')">
                            <div class="agent-name">Plot Weaver</div>
                            <div class="agent-specialty">Story structure & plot development</div>
                        </div>
                        <div class="agent-item" onclick="selectAgent('character')">
                            <div class="agent-name">Character Architect</div>
                            <div class="agent-specialty">Character creation & development</div>
                        </div>
                        <div class="agent-item" onclick="selectAgent('world')">
                            <div class="agent-name">World Builder</div>
                            <div class="agent-specialty">Setting & world creation</div>
                        </div>
                        <div class="agent-item" onclick="selectAgent('dialogue')">
                            <div class="agent-name">Dialogue Master</div>
                            <div class="agent-specialty">Conversation & voice</div>
                        </div>
                        <div class="agent-item" onclick="selectAgent('editor')">
                            <div class="agent-name">Style Editor</div>
                            <div class="agent-specialty">Prose improvement & editing</div>
                        </div>
                    </div>
                </div>
                <div class="chat-main">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message agent">
                            <div class="message-avatar">PW</div>
                            <div class="message-content">
                                Hello! I'm Plot Weaver, your story structure specialist. I can help you develop compelling plots, resolve story conflicts, and create engaging narrative arcs. What story challenge can I help you with today?
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-area">
                        <div class="chat-input-group">
                            <input type="text" class="chat-input" placeholder="Ask your AI assistant anything..." id="chatInput" onkeypress="handleChatKeypress(event)">
                            <button class="chat-send-btn" onclick="sendChatMessage()">Send</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Manuscript View -->
        <div id="manuscript" class="view">
            <div class="manuscript-toolbar">
                <div class="toolbar-group">
                    <button class="toolbar-btn">File</button>
                    <button class="toolbar-btn">Edit</button>
                    <button class="toolbar-btn">View</button>
                    <button class="toolbar-btn">Insert</button>
                    <button class="toolbar-btn">Tools</button>
                </div>
                <div class="toolbar-group">
                    <button class="btn-primary">Share</button>
                    <button class="toolbar-btn">Download</button>
                </div>
            </div>
            <div class="manuscript-container">
                <div class="manuscript-editor">
                    <div class="editor-content">
                        <h1 class="chapter-title">Chapter 3: The Brass Automaton</h1>
                        
                        <div class="paragraph">
                            The rain fell in sheets over the cobblestone streets of the Iron Quarter. Cogsworth, my golem companion, paid it no mind. His ceramic chassis was built to withstand far more than a summer storm.
                        </div>

                        <div class="paragraph">
                            "The killer left this," he rumbled, his voice a low grind of stone on stone. He held up a small, intricately carved gear made of a bone-white material I'd never seen before. It hummed with a faint, sickly energy.
                        </div>

                        <div class="paragraph">
                            "That's no ordinary gear," I whispered, pulling out my loupe. "That's a phylactery..." The implications hit me like a thunderbolt. Someone was using necromantic alchemy to bind souls to mechanical devices.
                        </div>

                        <div class="paragraph">
                            Cogsworth's optical lenses whirred as they focused on the artifact. "The resonance frequency matches the murders from last week. This is our connection."
                        </div>
                    </div>
                </div>

                <div class="comments-sidebar">
                    <div class="comments-header">
                        Comments & Suggestions
                    </div>
                    
                    <div class="comment-item">
                        <div class="comment-meta">
                            <span class="comment-author">Marcus</span>
                            <span class="comment-time">5 min ago</span>
                        </div>
                        <div class="comment-text">
                            Love the atmospheric opening! The rain on ceramic detail would be a nice sensory addition.
                        </div>
                        <div class="comment-actions">
                            <button class="comment-btn btn-accept">Accept</button>
                            <button class="comment-btn btn-reply">Reply</button>
                        </div>
                    </div>

                    <div class="comment-item">
                        <div class="comment-meta">
                            <span class="comment-author">Editor AI</span>
                            <span class="comment-time">12 min ago</span>
                        </div>
                        <div class="comment-text"></div></div></div></div></main>// NovelForge AI - Complete JavaScript Application

                        class NovelForgeApp {
                            constructor() {
                                this.currentView = 'dashboard';
                                this.currentUser = {
                                    name: 'Alex Chen',
                                    role: 'Director',
                                    avatar: 'AC',
                                    permissions: ['read', 'write', 'comment', 'manage']
                                };
                                this.projects = [
                                    {
                                        id: 1,
                                        title: 'The Brass Automaton',
                                        description: 'A steampunk mystery set in the Iron Quarter',
                                        progress: 67,
                                        collaborators: ['Alex Chen', 'Marcus', 'Lyra', 'Editor'],
                                        lastModified: '2 hours ago',
                                        status: 'active'
                                    },
                                    {
                                        id: 2,
                                        title: 'Digital Shadows',
                                        description: 'Cyberpunk thriller in Neo-Tokyo',
                                        progress: 34,
                                        collaborators: ['Alex Chen', 'Sarah Kim'],
                                        lastModified: '1 day ago',
                                        status: 'active'
                                    },
                                    {
                                        id: 3,
                                        title: 'The Last Library',
                                        description: 'Post-apocalyptic adventure',
                                        progress: 89,
                                        collaborators: ['Alex Chen', 'Dr. Martinez'],
                                        lastModified: '3 days ago',
                                        status: 'review'
                                    }
                                ];
                                this.chapters = [
                                    { id: 1, title: 'Chapter 1: The Discovery', wordCount: 2847, status: 'complete' },
                                    { id: 2, title: 'Chapter 2: Shadows in Steam', wordCount: 3156, status: 'complete' },
                                    { id: 3, title: 'Chapter 3: The Brass Automaton', wordCount: 2934, status: 'editing' },
                                    { id: 4, title: 'Chapter 4: Clockwork Conspiracies', wordCount: 0, status: 'draft' }
                                ];
                                this.comments = [
                                    {
                                        id: 1,
                                        author: 'Lyra',
                                        text: 'Can we describe the rain making sizzle sounds on his chassis? Would add a nice sensory detail.',
                                        timestamp: '2 min ago',
                                        status: 'pending'
                                    },
                                    {
                                        id: 2,
                                        author: 'Editor',
                                        text: 'Suggestion: "That\'s no ordinary gear," I said, my breath catching as I raised my loupe. "It\'s a phylactery..."',
                                        timestamp: '5 min ago',
                                        status: 'pending',
                                        suggestion: true
                                    }
                                ];
                                this.init();
                            }
                        
                            init() {
                                this.setupEventListeners();
                                this.renderCurrentView();
                                this.setupRouting();
                            }
                        
                            setupEventListeners() {
                                document.addEventListener('click', (e) => {
                                    if (e.target.matches('[data-view]')) {
                                        e.preventDefault();
                                        this.switchView(e.target.dataset.view);
                                    }
                                    if (e.target.matches('[data-action]')) {
                                        e.preventDefault();
                                        this.handleAction(e.target.dataset.action, e.target);
                                    }
                                });
                        
                                document.addEventListener('keydown', (e) => {
                                    if (e.ctrlKey && e.key === 's') {
                                        e.preventDefault();
                                        this.saveProject();
                                    }
                                });
                            }
                        
                            setupRouting() {
                                window.addEventListener('hashchange', () => {
                                    const hash = window.location.hash.slice(1);
                                    if (hash) {
                                        this.switchView(hash);
                                    }
                                });
                        
                                const initialHash = window.location.hash.slice(1);
                                if (initialHash) {
                                    this.switchView(initialHash);
                                }
                            }
                        
                            switchView(viewName) {
                                this.currentView = viewName;
                                window.location.hash = viewName;
                                this.renderCurrentView();
                                this.updateNavigation();
                            }
                        
                            renderCurrentView() {
                                const app = document.getElementById('app');
                                if (!app) return;
                        
                                switch (this.currentView) {
                                    case 'dashboard':
                                        app.innerHTML = this.renderDashboard();
                                        break;
                                    case 'project':
                                        app.innerHTML = this.renderProjectView();
                                        break;
                                    case 'manuscript':
                                        app.innerHTML = this.renderManuscriptView();
                                        break;
                                    case 'agent':
                                        app.innerHTML = this.renderAgentView();
                                        break;
                                    default:
                                        app.innerHTML = this.renderDashboard();
                                }
                        
                                this.attachViewSpecificListeners();
                            }
                        
                            renderDashboard() {
                                return `
                                    <div class="dashboard-container">
                                        <div class="dashboard-header">
                                            <div class="welcome-section">
                                                <h1>Welcome back, ${this.currentUser.name}</h1>
                                                <p>Continue your creative journey</p>
                                            </div>
                                            <div class="quick-actions">
                                                <button class="btn btn-primary" data-action="new-project">
                                                    <i class="icon">+</i> New Project
                                                </button>
                                                <button class="btn btn-secondary" data-view="agent">
                                                    <i class="icon">🤖</i> AI Assistant
                                                </button>
                                            </div>
                                        </div>
                        
                                        <div class="dashboard-grid">
                                            <div class="projects-section">
                                                <h2>Your Projects</h2>
                                                <div class="projects-grid">
                                                    ${this.projects.map(project => `
                                                        <div class="project-card" data-action="open-project" data-project-id="${project.id}">
                                                            <div class="project-header">
                                                                <h3>${project.title}</h3>
                                                                <span class="project-status status-${project.status}">${project.status}</span>
                                                            </div>
                                                            <p class="project-description">${project.description}</p>
                                                            <div class="project-progress">
                                                                <div class="progress-bar">
                                                                    <div class="progress-fill" style="width: ${project.progress}%"></div>
                                                                </div>
                                                                <span class="progress-text">${project.progress}% complete</span>
                                                            </div>
                                                            <div class="project-footer">
                                                                <div class="collaborators">
                                                                    ${project.collaborators.slice(0, 3).map(name => `
                                                                        <div class="avatar">${name.split(' ').map(n => n[0]).join('')}</div>
                                                                    `).join('')}
                                                                    ${project.collaborators.length > 3 ? `<div class="avatar">+${project.collaborators.length - 3}</div>` : ''}
                                                                </div>
                                                                <span class="last-modified">${project.lastModified}</span>
                                                            </div>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </div>
                        
                                            <div class="activity-section">
                                                <h2>Recent Activity</h2>
                                                <div class="activity-feed">
                                                    <div class="activity-item">
                                                        <div class="activity-avatar">M</div>
                                                        <div class="activity-content">
                                                            <p><strong>Marcus</strong> commented on Chapter 3</p>
                                                            <span class="activity-time">15 minutes ago</span>
                                                        </div>
                                                    </div>
                                                    <div class="activity-item">
                                                        <div class="activity-avatar">L</div>
                                                        <div class="activity-content">
                                                            <p><strong>Lyra</strong> suggested changes to dialogue</p>
                                                            <span class="activity-time">1 hour ago</span>
                                                        </div>
                                                    </div>
                                                    <div class="activity-item">
                                                        <div class="activity-avatar">E</div>
                                                        <div class="activity-content">
                                                            <p><strong>Editor</strong> approved Chapter 2</p>
                                                            <span class="activity-time">3 hours ago</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }
                        
                            renderProjectView() {
                                return `
                                    <div class="project-container">
                                        <div class="project-header">
                                            <div class="project-info">
                                                <h1>The Brass Automaton</h1>
                                                <p>Steampunk mystery set in the Iron Quarter</p>
                                            </div>
                                            <div class="project-actions">
                                                <button class="btn btn-primary" data-view="manuscript">
                                                    <i class="icon">📝</i> Open Manuscript
                                                </button>
                                                <button class="btn btn-secondary" data-action="share-project">
                                                    <i class="icon">👥</i> Share
                                                </button>
                                            </div>
                                        </div>
                        
                                        <div class="project-tabs">
                                            <button class="tab-button active" data-tab="overview">Overview</button>
                                            <button class="tab-button" data-tab="chapters">Chapters</button>
                                            <button class="tab-button" data-tab="characters">Characters</button>
                                            <button class="tab-button" data-tab="timeline">Timeline</button>
                                        </div>
                        
                                        <div class="project-content">
                                            <div class="tab-content active" id="overview">
                                                <div class="overview-grid">
                                                    <div class="stats-card">
                                                        <h3>Project Statistics</h3>
                                                        <div class="stat-item">
                                                            <span class="stat-label">Total Word Count</span>
                                                            <span class="stat-value">8,937</span>
                                                        </div>
                                                        <div class="stat-item">
                                                            <span class="stat-label">Chapters Complete</span>
                                                            <span class="stat-value">2/4</span>
                                                        </div>
                                                        <div class="stat-item">
                                                            <span class="stat-label">Active Collaborators</span>
                                                            <span class="stat-value">4</span>
                                                        </div>
                                                    </div>
                        
                                                    <div class="timeline-card">
                                                        <h3>Recent Changes</h3>
                                                        <div class="timeline-item">
                                                            <span class="timeline-time">2 hours ago</span>
                                                            <span class="timeline-action">Chapter 3 edited by Alex</span>
                                                        </div>
                                                        <div class="timeline-item">
                                                            <span class="timeline-time">1 day ago</span>
                                                            <span class="timeline-action">New comments from Lyra</span>
                                                        </div>
                                                        <div class="timeline-item">
                                                            <span class="timeline-time">2 days ago</span>
                                                            <span class="timeline-action">Chapter 2 approved</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                        
                                            <div class="tab-content" id="chapters">
                                                <div class="chapters-list">
                                                    ${this.chapters.map(chapter => `
                                                        <div class="chapter-item">
                                                            <div class="chapter-info">
                                                                <h4>${chapter.title}</h4>
                                                                <span class="chapter-status status-${chapter.status}">${chapter.status}</span>
                                                            </div>
                                                            <div class="chapter-stats">
                                                                <span class="word-count">${chapter.wordCount} words</span>
                                                                <button class="btn btn-sm" data-action="edit-chapter" data-chapter-id="${chapter.id}">
                                                                    Edit
                                                                </button>
                                                            </div>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </div>
                        
                                            <div class="tab-content" id="characters">
                                                <div class="characters-grid">
                                                    <div class="character-card">
                                                        <h4>Cogsworth</h4>
                                                        <p>Golem companion with ceramic chassis</p>
                                                        <span class="character-role">Main Character</span>
                                                    </div>
                                                    <div class="character-card">
                                                        <h4>Lady Elara Vane</h4>
                                                        <p>Shadowy head of the Alchemists' Guild</p>
                                                        <span class="character-role">Antagonist</span>
                                                    </div>
                                                    <div class="character-card">
                                                        <h4>Detective Kane</h4>
                                                        <p>Protagonist investigating the murders</p>
                                                        <span class="character-role">Protagonist</span>
                                                    </div>
                                                </div>
                                            </div>
                        
                                            <div class="tab-content" id="timeline">
                                                <div class="timeline-view">
                                                    <div class="timeline-event">
                                                        <div class="event-date">Day 1</div>
                                                        <div class="event-content">
                                                            <h4>The Discovery</h4>
                                                            <p>First murder discovered in the Iron Quarter</p>
                                                        </div>
                                                    </div>
                                                    <div class="timeline-event">
                                                        <div class="event-date">Day 2</div>
                                                        <div class="event-content">
                                                            <h4>Shadows in Steam</h4>
                                                            <p>Investigation leads to the Guild</p>
                                                        </div>
                                                    </div>
                                                    <div class="timeline-event">
                                                        <div class="event-date">Day 3</div>
                                                        <div class="event-content">
                                                            <h4>The Brass Automaton</h4>
                                                            <p>Cogsworth reveals crucial evidence</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }
                        
                            renderManuscriptView() {
                                return `
                                    <div class="manuscript-container">
                                        <div class="manuscript-toolbar">
                                            <div class="toolbar-left">
                                                <button class="menu-item">File</button>
                                                <button class="menu-item">Edit</button>
                                                <button class="menu-item">View</button>
                                                <button class="menu-item">Insert</button>
                                                <button class="menu-item">Tools</button>
                                            </div>
                                            <div class="toolbar-right">
                                                <button class="btn btn-primary">Share</button>
                                                <button class="btn btn-secondary">Download</button>
                                            </div>
                                        </div>
                        
                                        <div class="manuscript-main">
                                            <div class="manuscript-editor">
                                                <div class="editor-content">
                                                    <h1 class="chapter-title">Chapter 3: The Brass Automaton</h1>
                                                    
                                                    <div class="paragraph" data-paragraph="1">
                                                        The rain fell in sheets over the cobblestone streets of the Iron Quarter. Cogsworth, my golem companion, paid it no mind. His ceramic chassis was built to withstand far more than a summer storm.
                                                    </div>
                        
                                                    <div class="paragraph" data-paragraph="2">
                                                        "The killer left this," he rumbled, his voice a low grind of stone on stone. He held up a small, intricately carved gear made of a bone-white material I'd never seen before. It hummed with a faint, sickly energy.
                                                    </div>
                        
                                                    <div class="paragraph highlight-suggestion" data-paragraph="3" data-action="show-inline-comment">
                                                        This sentence feels a bit weak. Maybe something more active?
                                                    </div>
                        
                                                    <div class="paragraph" data-paragraph="4">
                                                        "That's no ordinary gear," I whispered, pulling out my loupe. "That's a phylactery..."
                                                    </div>
                                                </div>
                                            </div>
                        
                                            <div class="comments-sidebar">
                                                <div class="comments-header">
                                                    <h3>Comments & Suggestions</h3>
                                                </div>
                                                <div class="comments-list">
                                                    ${this.comments.map(comment => `
                                                        <div class="comment-item">
                                                            <div class="comment-meta">
                                                                <span class="comment-author">${comment.author}</span>
                                                                <span class="comment-time">${comment.timestamp}</span>
                                                            </div>
                                                            <div class="comment-text">${comment.text}</div>
                                                            <div class="comment-actions">
                                                                <button class="comment-btn btn-accept" data-action="accept-comment" data-comment-id="${comment.id}">
                                                                    Accept
                                                                </button>
                                                                <button class="comment-btn btn-reject" data-action="reject-comment" data-comment-id="${comment.id}">
                                                                    Reject
                                                                </button>
                                                                <button class="comment-btn btn-reply" data-action="reply-comment" data-comment-id="${comment.id}">
                                                                    Reply
                                                                </button>
                                                            </div>
                                                        </div>
                                                    `).join('')}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }
                        
                            renderAgentView() {
                                return `
                                    <div class="agent-container">
                                        <div class="agent-header">
                                            <div class="logo">
                                                <div class="logo-icon">N</div>
                                                <span>NovelForge AI</span>
                                            </div>
                                        </div>
                        
                                        <div class="agent-main">
                                            <h1 class="agent-title">Agent Task: Brainstorm Character</h1>
                        
                                            <div class="agent-form">
                                                <div class="form-group">
                                                    <label class="form-label">Select Agent:</label>
                                                    <select class="agent-select" id="agentSelect">
                                                        <option value="character-architect">Character Architect</option>
                                                        <option value="plot-weaver">Plot Weaver</option>
                                                        <option value="world-builder">World Builder</option>
                                                        <option value="dialogue-master">Dialogue Master</option>
                                                        <option value="scene-sculptor">Scene Sculptor</option>
                                                    </select>
                                                </div>
                        
                                                <div class="form-group">
                                                    <label class="form-label">Your Request:</label>
                                                    <textarea class="request-textarea" id="requestTextarea" placeholder="Describe what you need help with...">I need a villain for my story. She's the shadowy head of the Alchemists' Guild. She should be motivated by a secret loss from her past. Can you give me three concepts for her, including a name, a brief backstory, and her core motivation?</textarea>
                                                </div>
                        
                                                <button class="btn btn-primary btn-send" data-action="send-agent-request">
                                                    Send Request
                                                </button>
                                            </div>
                        
                                            <div class="agent-response" id="agentResponse" style="display: none;">
                                                <div class="response-header">Agent Response</div>
                                                <div class="response-content">
                                                    <p>Of course! Here are three compelling concepts for your villain:</p>
                                                    
                                                    <div class="concept-card">
                                                        <h4>Concept 1: Lady Elara Vane</h4>
                                                        <div class="concept-detail">
                                                            <strong>Name:</strong> Lady Elara Vane
                                                        </div>
                                                        <div class="concept-detail">
                                                            <strong>Backstory:</strong> Her younger brother was killed in a failed alchemical experiment that Kaelen, the hero, was involved in. The Guild covered it up.
                                                        </div>
                                                        <div class="concept-detail">
                                                            <strong>Motivation:</strong> To harness the city's power source to resurrect her brother, no matter the cost.
                                                        </div>
                                                    </div>
                        
                                                    <div class="concept-card">
                                                        <h4>Concept 2: Magistrix Corvina Blackthorne</h4>
                                                        <div class="concept-detail">
                                                            <strong>Name:</strong> Magistrix Corvina Blackthorne
                                                        </div>
                                                        <div class="concept-detail">
                                                            <strong>Backstory:</strong> Lost her daughter to a plague that could have been cured with forbidden transmutation magic.
                                                        </div>
                                                        <div class="concept-detail">
                                                            <strong>Motivation:</strong> To overthrow the Guild's moral restrictions and pursue any knowledge.
                                                        </div>
                                                    </div>
                        
                                                    <div class="concept-card">
                                                        <h4>Concept 3: The Shadow Regent Lydia Ashworth</h4>
                                                        <div class="concept-detail">
                                                            <strong>Name:</strong> The Shadow Regent Lydia Ashworth
                                                        </div>
                                                        <div class="concept-detail">
                                                            <strong>Backstory:</strong> Her mentor betrayed her research to rivals, leading to public disgrace.
                                                        </div>
                                                        <div class="concept-detail">
                                                            <strong>Motivation:</strong> To control all alchemical knowledge and eliminate betrayers.
                                                        </div>
                                                    </div>
                                                </div>
                        
                                                <div class="response-actions">
                                                    <button class="btn btn-primary" data-action="use-concepts">Use These Concepts</button>
                                                    <button class="btn btn-secondary" data-action="request-revisions">Request Revisions</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }
                        
                            updateNavigation() {
                                const navItems = document.querySelectorAll('[data-view]');
                                navItems.forEach(item => {
                                    item.classList.toggle('active', item.dataset.view === this.currentView);
                                });
                            }
                        
                            attachViewSpecificListeners() {
                                switch (this.currentView) {
                                    case 'project':
                                        this.attachProjectListeners();
                                        break;
                                    case 'manuscript':
                                        this.attachManuscriptListeners();
                                        break;
                                    case 'agent':
                                        this.attachAgentListeners();
                                        break;
                                }
                            }
                        
                            attachProjectListeners() {
                                const tabButtons = document.querySelectorAll('.tab-button');
                                const tabContents = document.querySelectorAll('.tab-content');
                        
                                tabButtons.forEach(button => {
                                    button.addEventListener('click', () => {
                                        const tabId = button.dataset.tab;
                                        
                                        tabButtons.forEach(btn => btn.classList.remove('active'));
                                        tabContents.forEach(content => content.classList.remove('active'));
                                        
                                        button.classList.add('active');
                                        document.getElementById(tabId).classList.add('active');
                                    });
                                });
                            }
                        
                            attachManuscriptListeners() {
                                const paragraphs = document.querySelectorAll('.paragraph');
                                paragraphs.forEach(paragraph => {
                                    paragraph.addEventListener('mouseenter', () => {
                                        paragraph.style.backgroundColor = 'rgba(0, 123, 255, 0.05)';
                                    });
                                    paragraph.addEventListener('mouseleave', () => {
                                        paragraph.style.backgroundColor = 'transparent';
                                    });
                                });
                            }
                        
                            attachAgentListeners() {
                                const agentSelect = document.getElementById('agentSelect');
                                const textarea = document.getElementById('requestTextarea');
                                
                                if (agentSelect) {
                                    agentSelect.addEventListener('change', (e) => {
                                        const selectedAgent = e.target.options[e.target.selectedIndex].text;
                                        const title = document.querySelector('.agent-title');
                                        if (title) {
                                            title.textContent = `Agent Task: Working with ${selectedAgent}`;
                                        }
                                    });
                                }
                        
                                if (textarea) {
                                    textarea.addEventListener('input', () => {
                                        textarea.style.height = 'auto';
                                        textarea.style.height = textarea.scrollHeight + 'px';
                                    });
                                }
                            }
                        
                            handleAction(action, element) {
                                switch (action) {
                                    case 'new-project':
                                        this.createNewProject();
                                        break;
                                    case 'open-project':
                                        this.openProject(element.dataset.projectId);
                                        break;
                                    case 'share-project':
                                        this.shareProject();
                                        break;
                                    case 'edit-chapter':
                                        this.editChapter(element.dataset.chapterId);
                                        break;
                                    case 'accept-comment':
                                        this.acceptComment(element.dataset.commentId, element);
                                        break;
                                    case 'reject-comment':
                                        this.rejectComment(element.dataset.commentId, element);
                                        break;
                                    case 'reply-comment':
                                        this.replyToComment(element.dataset.commentId);
                                        break;
                                    case 'send-agent-request':
                                        this.sendAgentRequest();
                                        break;
                                    case 'use-concepts':
                                        this.useConcepts(element);
                                        break;
                                    case 'request-revisions':
                                        this.requestRevisions();
                                        break;
                                    case 'show-inline-comment':
                                        this.showInlineComment(element);
                                        break;
                                }
                            }
                        
                            createNewProject() {
                                const projectName = prompt('Enter project name:');
                                if (projectName) {
                                    const newProject = {
                                        id: Date.now(),
                                        title: projectName,
                                        description: 'New project',
                                        progress: 0,
                                        collaborators: [this.currentUser.name],
                                        lastModified: 'Just now',
                                        status: 'active'
                                    };
                                    this.projects.unshift(newProject);
                                    this.renderCurrentView();
                                    this.showNotification('Project created successfully!');
                                }
                            }
                        
                            openProject(projectId) {
                                this.switchView('project');
                            }
                        
                            shareProject() {
                                const shareUrl = `${window.location.origin}/project/share/${Date.now()}`;
                                navigator.clipboard.writeText(shareUrl).then(() => {
                                    this.showNotification('Share link copied to clipboard!');
                                });
                            }
                        
                            editChapter(chapterId) {
                                this.switchView('manuscript');
                            }
                        
                            acceptComment(commentId, element) {
                                const comment = this.comments.find(c => c.id == commentId);
                                if (comment) {
                                    comment.status = 'accepted';
                                    element.textContent = 'Accepted ✓';
                                    element.disabled = true;
                                    element.style.backgroundColor = '#28a745';
                                    this.showNotification('Comment accepted');
                                }
                            }
                        
                            rejectComment(commentId, element) {
                                const comment = this.comments.find(c => c.id == commentId);
                                if (comment) {
                                    comment.status = 'rejected';
                                    element.textContent = 'Rejected ✗';
                                    element.disabled = true;
                                    element.style.backgroundColor = '#dc3545';
                                    this.showNotification('Comment rejected');
                                }
                            }
                        
                            replyToComment(commentId) {
                                const reply = prompt('Enter your reply:');
                                if (reply) {
                                    this.showNotification('Reply sent!');
                                }
                            }
                        
                            sendAgentRequest() {
                                const button = document.querySelector('[data-action="send-agent-request"]');
                                const response = document.getElementById('agentResponse');
                                
                                button.textContent = 'Sending...';
                                button.disabled = true;
                                
                                setTimeout(() => {
                                    response.style.display = 'block';
                                    response.scrollIntoView({ behavior: 'smooth' });
                                    button.textContent = 'Send Request';
                                    button.disabled = false;
                                }, 2000);
                            }
                        
                            useConcepts(element) {
                                element.textContent = 'Concepts Saved ✓';
                                element.disabled = true;
                                element.style.backgroundColor = '#28a745';
                                this.showNotification('Character concepts saved to your project!');
                            }
                        
                            requestRevisions() {
                                const textarea = document.getElementById('requestTextarea');
                                if (textarea) {
                                    textarea.value = "I'd like you to revise these concepts. For Concept 1, can you make her motivation more personal? For Concept 2, can you give her a more distinctive physical trait?";
                                    textarea.focus();
                                    textarea.scrollIntoView({ behavior: 'smooth' });
                                }
                            }
                        
                            showInlineComment(element) {
                                const existingComment = element.querySelector('.inline-comment');
                                if (existingComment) {
                                    existingComment.remove();
                                } else {
                                    const inlineComment = document.createElement('div');
                                    inlineComment.className = 'inline-comment';
                                    inlineComment.innerHTML = `
                                        <div class="comment-author">Editor</div>
                                        <div>This sentence feels a bit weak. Maybe something more active?</div>
                                        <div class="comment-actions">
                                            <button class="comment-btn btn-accept" data-action="accept-comment" data-comment-id="inline">Accept</button>
                                            <button class="comment-btn btn-reject" data-action="reject-comment" data-comment-id="inline">Reject</button>
                                            <button class="comment-btn btn-reply" data-action="reply-comment" data-comment-id="inline">Reply</button>
                                        </div>
                                    `;
                                    element.appendChild(inlineComment);
                                }
                            }
                        
                            saveProject() {
                                this.showNotification('Project saved successfully!');
                            }
                        
                            showNotification(message) {
                                const notification = document.createElement('div');
                                notification.className = 'notification';
                                notification.textContent = message;
                                notification.style.cssText = `
                                    position: fixed;
                                    top: 20px;
                                    right: 20px;
                                    background: #28a745;
                                    color: white;
                                    padding: 12px 24px;
                                    border-radius: 8px;
                                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                                    z-index: 1000;
                                    animation: slideIn 0.3s ease;
                                `;
                                
                                document.body.appendChild(notification);
                                
                                setTimeout(() => {
                                    notification.style.animation = 'slideOut 0.3s ease';
                                    setTimeout(() => {
                                        notification.remove();
                                    }, 300);
                                }, 3000);
                            }
                        }
                        
                        // Initialize the application when DOM is loaded
                        document.addEventListener('DOMContentLoaded', () => {
                            window.novelForgeApp = new NovelForgeApp();
                        });
                        
                        // Additional utility functions
                        function debounce(func, wait) {
                            let timeout;
                            return function executedFunction(...args) {
                                const later = () => {
                                    clearTimeout(timeout);
                                    func(...args);
                                };
                                clearTimeout(timeout);
                                timeout = setTimeout(later, wait);
                            };
                        }
                        
                        function formatDate(date) {
                            const now = new Date();
                            const diff = now - date;
                            const seconds = Math.floor(diff / 1000);
                            const minutes = Math.floor(seconds / 60);
                            const hours = Math.floor(minutes / 60);
                            const days = Math.floor(hours / 24);
                            
                            if (days > 0) return `${days} day${days > 1 ? 's' :</body></html>
